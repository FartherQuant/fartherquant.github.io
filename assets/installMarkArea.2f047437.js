import{M as $,a as U,d as S,z as B,b,e as Q}from"./MarkerView.a435cabd.js";import{_ as W,m as h,G as R,ax as C,aM as X,w as G,aq as P,P as w,u as Y,j as Z,k as _,c as ee,t as te,a7 as ae,g as N,aU as V,af as F,bi as re,a$ as ne,aO as d,bt as ie,ac as j,J as L,bn as T}from"./index.esm.min.c41b8ffa.js";var oe=function(e){W(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.createMarkerModelFromSeries=function(a,i,o){return new t(a,i,o)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}($),se=oe,k=ne(),le=function(e,t,a,i){var o=S(e,i[0]),u=S(e,i[1]),c=o.coord,s=u.coord;c[0]=d(c[0],-1/0),c[1]=d(c[1],-1/0),s[0]=d(s[0],1/0),s[1]=d(s[1],1/0);var f=ie([{},o,u]);return f.coord=[o.coord,u.coord],f.x0=o.x,f.y0=o.y,f.x1=u.x,f.y1=u.y,f};function I(e){return!isNaN(e)&&!isFinite(e)}function O(e,t,a,i){var o=1-e;return I(t[o])&&I(a[o])}function ue(e,t){var a=t.coord[0],i=t.coord[1],o={coord:a,x:t.x0,y:t.y0},u={coord:i,x:t.x1,y:t.y1};return j(e,"cartesian2d")?a&&i&&(O(1,a,i)||O(0,a,i))?!0:B(e,o,u):b(e,o)||b(e,u)}function z(e,t,a,i,o){var u=i.coordinateSystem,c=e.getItemModel(t),s,f=L(c.get(a[0]),o.getWidth()),v=L(c.get(a[1]),o.getHeight());if(!isNaN(f)&&!isNaN(v))s=[f,v];else{if(i.getMarkerPosition)s=i.getMarkerPosition(e.getValues(a,t));else{var l=e.get(a[0],t),n=e.get(a[1],t),r=[l,n];u.clampData&&u.clampData(r,r),s=u.dataToPoint(r,!0)}if(j(u,"cartesian2d")){var g=u.getAxis("x"),p=u.getAxis("y"),l=e.get(a[0],t),n=e.get(a[1],t);I(l)?s[0]=g.toGlobalCoord(g.getExtent()[a[0]==="x0"?0:1]):I(n)&&(s[1]=p.toGlobalCoord(p.getExtent()[a[1]==="y0"?0:1]))}isNaN(f)||(s[0]=f),isNaN(v)||(s[1]=v)}return s}var H=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],pe=function(e){W(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.updateTransform=function(a,i,o){i.eachSeries(function(u){var c=$.getMarkerModelFromSeries(u,"markArea");if(c){var s=c.getData();s.each(function(f){var v=h(H,function(n){return z(s,f,n,u,o)});s.setItemLayout(f,v);var l=s.getItemGraphicEl(f);l.setShape("points",v)})}},this)},t.prototype.renderSeries=function(a,i,o,u){var c=a.coordinateSystem,s=a.id,f=a.getData(),v=this.markerGroupMap,l=v.get(s)||v.set(s,{group:new R});this.group.add(l.group),this.markKeep(l);var n=fe(c,a,i);i.setData(n),n.each(function(r){var g=h(H,function(K){return z(n,r,K,a,u)}),p=c.getAxis("x").scale,m=c.getAxis("y").scale,M=p.getExtent(),D=m.getExtent(),x=[p.parse(n.get("x0",r)),p.parse(n.get("x1",r))],A=[m.parse(n.get("y0",r)),m.parse(n.get("y1",r))];C(x),C(A);var q=!(M[0]>x[1]||M[1]<x[0]||D[0]>A[1]||D[1]<A[0]),J=!q;n.setItemLayout(r,{points:g,allClipped:J});var y=n.getItemModel(r).getModel("itemStyle").getItemStyle(),E=X(f,"color");y.fill||(y.fill=E,G(y.fill)&&(y.fill=P(y.fill,.4))),y.stroke||(y.stroke=E),n.setItemVisual(r,"style",y)}),n.diff(k(l).data).add(function(r){var g=n.getItemLayout(r);if(!g.allClipped){var p=new w({shape:{points:g.points}});n.setItemGraphicEl(r,p),l.group.add(p)}}).update(function(r,g){var p=k(l).data.getItemGraphicEl(g),m=n.getItemLayout(r);m.allClipped?p&&l.group.remove(p):(p?Y(p,{shape:{points:m.points}},i,r):p=new w({shape:{points:m.points}}),n.setItemGraphicEl(r,p),l.group.add(p))}).remove(function(r){var g=k(l).data.getItemGraphicEl(r);l.group.remove(g)}).execute(),n.eachItemGraphicEl(function(r,g){var p=n.getItemModel(g),m=n.getItemVisual(g,"style");r.useStyle(n.getItemVisual(g,"style")),Z(r,_(p),{labelFetcher:i,labelDataIndex:g,defaultText:n.getName(g)||"",inheritColor:G(m.fill)?P(m.fill,1):"#000"}),ee(r,p),te(r,null,null,p.get(["emphasis","disabled"])),ae(r).dataModel=i}),k(l).data=n,l.group.silent=i.get("silent")||a.get("silent")},t.type="markArea",t}(U);function fe(e,t,a){var i,o,u=["x0","y0","x1","y1"];if(e){var c=h(e&&e.dimensions,function(v){var l=t.getData(),n=l.getDimensionInfo(l.mapDimension(v))||{};return N(N({},n),{name:v,ordinalMeta:null})});o=h(u,function(v,l){return{name:v,type:c[l%2].type}}),i=new V(o,a)}else o=[{name:"value",type:"float"}],i=new V(o,a);var s=h(a.get("data"),F(le,t,e,a));e&&(s=re(s,F(ue,e)));var f=e?function(v,l,n,r){var g=v.coord[Math.floor(r/2)][r%2];return T(g,o[r])}:function(v,l,n,r){return T(v.value,o[r])};return i.initData(s,null,f),i.hasItemOption=!0,i}var ve=pe;function me(e){e.registerComponentModel(se),e.registerComponentView(ve),e.registerPreprocessor(function(t){Q(t.series,"markArea")&&(t.markArea=t.markArea||{})})}export{me as i};
