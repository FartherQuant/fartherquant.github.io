import{M as $,a as B,d as S,z as J,b as E,e as Q}from"./MarkerView.695cf5c3.js";import{_ as j,m as I,G as R,aY as C,b9 as X,y as G,aU as N,P as w,u as Z,j as _,k as V,g as ee,t as te,a6 as ae,e as F,S as L,ac as P,bl as re,bm as ne,bb as A,bO as ie,aa as K,L as T,bs as O}from"./index.esm.min.5835493e.js";var oe=function(e){j(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.createMarkerModelFromSeries=function(t,o,f){return new a(t,o,f)},a.type="markArea",a.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},a}($),se=oe,M=ne(),le=function(e,a,t,o){var f=o[0],u=o[1];if(!(!f||!u)){var g=S(e,f),s=S(e,u),y=g.coord,l=s.coord;y[0]=A(y[0],-1/0),y[1]=A(y[1],-1/0),l[0]=A(l[0],1/0),l[1]=A(l[1],1/0);var n=ie([{},g,s]);return n.coord=[g.coord,s.coord],n.x0=g.x,n.y0=g.y,n.x1=s.x,n.y1=s.y,n}};function b(e){return!isNaN(e)&&!isFinite(e)}function z(e,a,t,o){var f=1-e;return b(a[f])&&b(t[f])}function ve(e,a){var t=a.coord[0],o=a.coord[1],f={coord:t,x:a.x0,y:a.y0},u={coord:o,x:a.x1,y:a.y1};return K(e,"cartesian2d")?t&&o&&(z(1,t,o)||z(0,t,o))?!0:J(e,f,u):E(e,f)||E(e,u)}function H(e,a,t,o,f){var u=o.coordinateSystem,g=e.getItemModel(a),s,y=T(g.get(t[0]),f.getWidth()),l=T(g.get(t[1]),f.getHeight());if(!isNaN(y)&&!isNaN(l))s=[y,l];else{if(o.getMarkerPosition){var n=e.getValues(["x0","y0"],a),i=e.getValues(["x1","y1"],a),r=u.clampData(n),p=u.clampData(i),v=[];t[0]==="x0"?v[0]=r[0]>p[0]?i[0]:n[0]:v[0]=r[0]>p[0]?n[0]:i[0],t[1]==="y0"?v[1]=r[1]>p[1]?i[1]:n[1]:v[1]=r[1]>p[1]?n[1]:i[1],s=o.getMarkerPosition(v,t,!0)}else{var c=e.get(t[0],a),h=e.get(t[1],a),d=[c,h];u.clampData&&u.clampData(d,d),s=u.dataToPoint(d,!0)}if(K(u,"cartesian2d")){var k=u.getAxis("x"),x=u.getAxis("y"),c=e.get(t[0],a),h=e.get(t[1],a);b(c)?s[0]=k.toGlobalCoord(k.getExtent()[t[0]==="x0"?0:1]):b(h)&&(s[1]=x.toGlobalCoord(x.getExtent()[t[1]==="y0"?0:1]))}isNaN(y)||(s[0]=y),isNaN(l)||(s[1]=l)}return s}var W=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],fe=function(e){j(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.updateTransform=function(t,o,f){o.eachSeries(function(u){var g=$.getMarkerModelFromSeries(u,"markArea");if(g){var s=g.getData();s.each(function(y){var l=I(W,function(i){return H(s,y,i,u,f)});s.setItemLayout(y,l);var n=s.getItemGraphicEl(y);n.setShape("points",l)})}},this)},a.prototype.renderSeries=function(t,o,f,u){var g=t.coordinateSystem,s=t.id,y=t.getData(),l=this.markerGroupMap,n=l.get(s)||l.set(s,{group:new R});this.group.add(n.group),this.markKeep(n);var i=ue(g,t,o);o.setData(i),i.each(function(r){var p=I(W,function(q){return H(i,r,q,t,u)}),v=g.getAxis("x").scale,c=g.getAxis("y").scale,h=v.getExtent(),d=c.getExtent(),k=[v.parse(i.get("x0",r)),v.parse(i.get("x1",r))],x=[c.parse(i.get("y0",r)),c.parse(i.get("y1",r))];C(k),C(x);var U=!(h[0]>k[1]||h[1]<k[0]||d[0]>x[1]||d[1]<x[0]),Y=!U;i.setItemLayout(r,{points:p,allClipped:Y});var m=i.getItemModel(r).getModel("itemStyle").getItemStyle(),D=X(y,"color");m.fill||(m.fill=D,G(m.fill)&&(m.fill=N(m.fill,.4))),m.stroke||(m.stroke=D),i.setItemVisual(r,"style",m)}),i.diff(M(n).data).add(function(r){var p=i.getItemLayout(r);if(!p.allClipped){var v=new w({shape:{points:p.points}});i.setItemGraphicEl(r,v),n.group.add(v)}}).update(function(r,p){var v=M(n).data.getItemGraphicEl(p),c=i.getItemLayout(r);c.allClipped?v&&n.group.remove(v):(v?Z(v,{shape:{points:c.points}},o,r):v=new w({shape:{points:c.points}}),i.setItemGraphicEl(r,v),n.group.add(v))}).remove(function(r){var p=M(n).data.getItemGraphicEl(r);n.group.remove(p)}).execute(),i.eachItemGraphicEl(function(r,p){var v=i.getItemModel(p),c=i.getItemVisual(p,"style");r.useStyle(i.getItemVisual(p,"style")),_(r,V(v),{labelFetcher:o,labelDataIndex:p,defaultText:i.getName(p)||"",inheritColor:G(c.fill)?N(c.fill,1):"#000"}),ee(r,v),te(r,null,null,v.get(["emphasis","disabled"])),ae(r).dataModel=o}),M(n).data=i,n.group.silent=o.get("silent")||t.get("silent")},a.type="markArea",a}(B);function ue(e,a,t){var o,f,u=["x0","y0","x1","y1"];if(e){var g=I(e&&e.dimensions,function(l){var n=a.getData(),i=n.getDimensionInfo(n.mapDimension(l))||{};return F(F({},i),{name:l,ordinalMeta:null})});f=I(u,function(l,n){return{name:l,type:g[n%2].type}}),o=new L(f,t)}else f=[{name:"value",type:"float"}],o=new L(f,t);var s=I(t.get("data"),P(le,a,e,t));e&&(s=re(s,P(ve,e)));var y=e?function(l,n,i,r){var p=l.coord[Math.floor(r/2)][r%2];return O(p,f[r])}:function(l,n,i,r){return O(l.value,f[r])};return o.initData(s,null,y),o.hasItemOption=!0,o}var pe=fe;function ce(e){e.registerComponentModel(se),e.registerComponentView(pe),e.registerPreprocessor(function(a){Q(a.series,"markArea")&&(a.markArea=a.markArea||{})})}export{ce as i};
