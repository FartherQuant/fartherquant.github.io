import{ah as K,a as ae,ai as ge,aj as je,ak as Te,z as q,ac as qe,al as $e,p as Je,am as Qe,S as Ke,i as Me,an as Ye,ao as xe,m as re,ap as et,_ as $,G as ie,o as ue,w as tt,aq as me,ar as at,as as rt,u as ee,s as it,c as ne,k as fe,at as nt,Z as ot,e as pe,j as Re,t as ve,a6 as x,au as ye,n as st,a3 as lt,av as ut,aw as te,Q as Ge,ax as j,ay as vt,az as de,a1 as ze,aA as Se,a7 as ht,aB as Y,ab as ft,aC as be,d as De,g as _e,aD as Ae,C as oe,aE as Ie,aF as ct,aG as gt,a4 as mt,aH as pt,aI as Ce,aa as yt,aJ as dt,aK as St,y as bt}from"./index.esm.min.283e8c3a.js";var Dt=function(){function i(t){this.coordSysDims=[],this.axisMap=ge(),this.categoryAxisMap=ge(),this.coordSysName=t}return i}();function _t(i){var t=i.get("coordinateSystem"),e=new Dt(t),a=At[t];if(a)return a(i,e,e.axisMap,e.categoryAxisMap),e}var At={cartesian2d:function(i,t,e,a){var o=i.getReferringComponents("xAxis",K).models[0],r=i.getReferringComponents("yAxis",K).models[0];t.coordSysDims=["x","y"],e.set("x",o),e.set("y",r),Z(o)&&(a.set("x",o),t.firstCategoryDimIndex=0),Z(r)&&(a.set("y",r),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(i,t,e,a){var o=i.getReferringComponents("singleAxis",K).models[0];t.coordSysDims=["single"],e.set("single",o),Z(o)&&(a.set("single",o),t.firstCategoryDimIndex=0)},polar:function(i,t,e,a){var o=i.getReferringComponents("polar",K).models[0],r=o.findAxisModel("radiusAxis"),n=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",r),e.set("angle",n),Z(r)&&(a.set("radius",r),t.firstCategoryDimIndex=0),Z(n)&&(a.set("angle",n),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(i,t,e,a){t.coordSysDims=["lng","lat"]},parallel:function(i,t,e,a){var o=i.ecModel,r=o.getComponent("parallel",i.get("parallelIndex")),n=t.coordSysDims=r.dimensions.slice();ae(r.parallelAxisIndex,function(s,l){var u=o.getComponent("parallelAxis",s),f=n[l];e.set(f,u),Z(u)&&(a.set(f,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Z(i){return i.get("type")==="category"}function It(i,t){var e=i.get("coordinateSystem"),a=xe.get(e),o;return t&&t.coordSysDims&&(o=re(t.coordSysDims,function(r){var n={name:r},s=t.axisMap.get(r);if(s){var l=s.get("type");n.type=et(l)}return n})),o||(o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),o}function Ct(i,t,e){var a,o;return e&&ae(i,function(r,n){var s=r.coordDim,l=e.categoryAxisMap.get(s);l&&(a==null&&(a=n),r.ordinalMeta=l.getOrdinalMeta(),t&&(r.createInvertedIndices=!0)),r.otherDims.itemName!=null&&(o=!0)}),!o&&a!=null&&(i[a].otherDims.itemName=0),a}function Pt(i,t,e){e=e||{};var a=t.getSourceManager(),o,r=!1;i?(r=!0,o=je(i)):(o=a.getSource(),r=o.sourceFormat===Te);var n=_t(t),s=It(t,n),l=e.useEncodeDefaulter,u=q(l)?l:l?qe($e,s,t):null,f={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!r},v=Je(o,f),c=Ct(v.dimensions,e.createInvertedIndices,n),h=r?null:a.getSharedDataStore(v),m=Qe(t,{schema:v,store:h}),y=new Ke(v,t);y.setCalculationInfo(m);var d=c!=null&&Nt(o)?function(g,p,S,_){return _===c?S:this.defaultDimValueGetter(g,p,S,_)}:null;return y.hasItemOption=!1,y.initData(r?o:h,null,d),y}function Nt(i){if(i.sourceFormat===Te){var t=kt(i.data||[]);return!Me(Ye(t))}}function kt(i){for(var t=0;t<i.length&&i[t]==null;)t++;return i[t]}var wt=function(i){$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return Pt(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var a=new ie,o=ue("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);a.add(o),o.setStyle(e.lineStyle);var r=this.getData().getVisual("symbol"),n=this.getData().getVisual("symbolRotate"),s=r==="none"?"circle":r,l=e.itemHeight*.8,u=ue(s,(e.itemWidth-l)/2,(e.itemHeight-l)/2,l,l,e.itemStyle.fill);a.add(u),u.setStyle(e.itemStyle);var f=e.iconRotate==="inherit"?n:e.iconRotate||0;return u.rotation=f*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(tt),Lt=wt;function Ve(i,t){var e=i.mapDimensionsAll("defaultedLabel"),a=e.length;if(a===1){var o=me(i,t,e[0]);return o!=null?o+"":null}else if(a){for(var r=[],n=0;n<e.length;n++)r.push(me(i,t,e[n]));return r.join(" ")}}function Et(i,t){var e=i.mapDimensionsAll("defaultedLabel");if(!Me(t))return t+"";for(var a=[],o=0;o<e.length;o++){var r=i.getDimensionIndex(e[o]);r>=0&&a.push(t[r])}return a.join(" ")}var Ot=function(i){$(t,i);function t(e,a,o,r){var n=i.call(this)||this;return n.updateData(e,a,o,r),n}return t.prototype._createSymbol=function(e,a,o,r,n){this.removeAll();var s=ue(e,-1,-1,2,2,null,n);s.attr({z2:100,culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),s.drift=Tt,this._symbolType=e,this.add(s)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){at(this.childAt(0))},t.prototype.downplay=function(){rt(this.childAt(0))},t.prototype.setZ=function(e,a){var o=this.childAt(0);o.zlevel=e,o.z=a},t.prototype.setDraggable=function(e,a){var o=this.childAt(0);o.draggable=e,o.cursor=!a&&e?"move":o.cursor},t.prototype.updateData=function(e,a,o,r){this.silent=!1;var n=e.getItemVisual(a,"symbol")||"circle",s=e.hostModel,l=t.getSymbolSize(e,a),u=n!==this._symbolType,f=r&&r.disableAnimation;if(u){var v=e.getItemVisual(a,"symbolKeepAspect");this._createSymbol(n,e,a,l,v)}else{var c=this.childAt(0);c.silent=!1;var h={scaleX:l[0]/2,scaleY:l[1]/2};f?c.attr(h):ee(c,h,s,a),it(c)}if(this._updateCommon(e,a,l,o,r),u){var c=this.childAt(0);if(!f){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,ne(c,h,s,a)}}f&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,a,o,r,n){var s=this.childAt(0),l=e.hostModel,u,f,v,c,h,m,y,d,g;if(r&&(u=r.emphasisItemStyle,f=r.blurItemStyle,v=r.selectItemStyle,c=r.focus,h=r.blurScope,y=r.labelStatesModels,d=r.hoverScale,g=r.cursorStyle,m=r.emphasisDisabled),!r||e.hasItemOption){var p=r&&r.itemModel?r.itemModel:e.getItemModel(a),S=p.getModel("emphasis");u=S.getModel("itemStyle").getItemStyle(),v=p.getModel(["select","itemStyle"]).getItemStyle(),f=p.getModel(["blur","itemStyle"]).getItemStyle(),c=S.get("focus"),h=S.get("blurScope"),m=S.get("disabled"),y=fe(p),d=S.getShallow("scale"),g=p.getShallow("cursor")}var _=e.getItemVisual(a,"symbolRotate");s.attr("rotation",(_||0)*Math.PI/180||0);var I=nt(e.getItemVisual(a,"symbolOffset"),o);I&&(s.x=I[0],s.y=I[1]),g&&s.attr("cursor",g);var b=e.getItemVisual(a,"style"),D=b.fill;if(s instanceof ot){var C=s.style;s.useStyle(pe({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},b))}else s.__isEmptyBrush?s.useStyle(pe({},b)):s.useStyle(b),s.style.decal=null,s.setColor(D,n&&n.symbolInnerColor),s.style.strokeNoScale=!0;var P=e.getItemVisual(a,"liftZ"),N=this._z2;P!=null?N==null&&(this._z2=s.z2,s.z2+=P):N!=null&&(s.z2=N,this._z2=null);var k=n&&n.useNameLabel;Re(s,y,{labelFetcher:l,labelDataIndex:a,defaultText:A,inheritColor:D,defaultOpacity:b.opacity});function A(R){return k?e.getName(R):Ve(e,R)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var w=s.ensureState("emphasis");w.style=u,s.ensureState("select").style=v,s.ensureState("blur").style=f;var M=d==null||d===!0?Math.max(1.1,3/this._sizeY):isFinite(d)&&d>0?+d:1;w.scaleX=this._sizeX*M,w.scaleY=this._sizeY*M,this.setSymbolScale(1),ve(this,c,h,m)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,a,o){var r=this.childAt(0),n=x(this).dataIndex,s=o&&o.animation;if(this.silent=r.silent=!0,o&&o.fadeLabel){var l=r.getTextContent();l&&ye(l,{style:{opacity:0}},a,{dataIndex:n,removeOpt:s,cb:function(){r.removeTextContent()}})}else r.removeTextContent();ye(r,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:n,cb:e,removeOpt:s})},t.getSymbolSize=function(e,a){return st(e.getItemVisual(a,"symbolSize"))},t}(ie);function Tt(i,t){this.parent.drift(i,t)}var ce=Ot;function se(i,t,e,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(e))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&i.getItemVisual(e,"symbol")!=="none"}function Pe(i){return i!=null&&!ut(i)&&(i={isIgnore:i}),i||{}}function Ne(i){var t=i.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:fe(t),cursorStyle:t.get("cursor")}}var Mt=function(){function i(t){this.group=new ie,this._SymbolCtor=t||ce}return i.prototype.updateData=function(t,e){this._progressiveEls=null,e=Pe(e);var a=this.group,o=t.hostModel,r=this._data,n=this._SymbolCtor,s=e.disableAnimation,l=Ne(t),u={disableAnimation:s},f=e.getSymbolPoint||function(v){return t.getItemLayout(v)};r||a.removeAll(),t.diff(r).add(function(v){var c=f(v);if(se(t,c,v,e)){var h=new n(t,v,l,u);h.setPosition(c),t.setItemGraphicEl(v,h),a.add(h)}}).update(function(v,c){var h=r.getItemGraphicEl(c),m=f(v);if(!se(t,m,v,e)){a.remove(h);return}var y=t.getItemVisual(v,"symbol")||"circle",d=h&&h.getSymbolType&&h.getSymbolType();if(!h||d&&d!==y)a.remove(h),h=new n(t,v,l,u),h.setPosition(m);else{h.updateData(t,v,l,u);var g={x:m[0],y:m[1]};s?h.attr(g):ee(h,g,o)}a.add(h),t.setItemGraphicEl(v,h)}).remove(function(v){var c=r.getItemGraphicEl(v);c&&c.fadeOut(function(){a.remove(c)},o)}).execute(),this._getSymbolPoint=f,this._data=t},i.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(a,o){var r=t._getSymbolPoint(o);a.setPosition(r),a.markRedraw()})},i.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Ne(t),this._data=null,this.group.removeAll()},i.prototype.incrementalUpdate=function(t,e,a){this._progressiveEls=[],a=Pe(a);function o(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var r=t.start;r<t.end;r++){var n=e.getItemLayout(r);if(se(e,n,r,a)){var s=new this._SymbolCtor(e,r,this._seriesScope);s.traverse(o),s.setPosition(n),this.group.add(s),e.setItemGraphicEl(r,s),this._progressiveEls.push(s)}}},i.prototype.eachRendered=function(t){lt(this._progressiveEls||this.group,t)},i.prototype.remove=function(t){var e=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},a.hostModel)}):e.removeAll()},i}(),Rt=Mt;function Fe(i,t,e){var a=i.getBaseAxis(),o=i.getOtherAxis(a),r=Gt(o,e),n=a.dim,s=o.dim,l=t.mapDimension(s),u=t.mapDimension(n),f=s==="x"||s==="radius"?1:0,v=re(i.dimensions,function(m){return t.mapDimension(m)}),c=!1,h=t.getCalculationInfo("stackResultDimension");return te(t,v[0])&&(c=!0,v[0]=h),te(t,v[1])&&(c=!0,v[1]=h),{dataDimsForPoint:v,valueStart:r,valueAxisDim:s,baseAxisDim:n,stacked:!!c,valueDim:l,baseDim:u,baseDataOffset:f,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Gt(i,t){var e=0,a=i.scale.getExtent();return t==="start"?e=a[0]:t==="end"?e=a[1]:Ge(t)&&!isNaN(t)?e=t:a[0]>0?e=a[0]:a[1]<0&&(e=a[1]),e}function He(i,t,e,a){var o=NaN;i.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),a)),isNaN(o)&&(o=i.valueStart);var r=i.baseDataOffset,n=[];return n[r]=e.get(i.baseDim,a),n[1-r]=o,t.dataToPoint(n)}function zt(i,t){var e=[];return t.diff(i).add(function(a){e.push({cmd:"+",idx:a})}).update(function(a,o){e.push({cmd:"=",idx:o,idx1:a})}).remove(function(a){e.push({cmd:"-",idx:a})}).execute(),e}function Vt(i,t,e,a,o,r,n,s){for(var l=zt(i,t),u=[],f=[],v=[],c=[],h=[],m=[],y=[],d=Fe(o,t,n),g=i.getLayout("points")||[],p=t.getLayout("points")||[],S=0;S<l.length;S++){var _=l[S],I=!0,b=void 0,D=void 0;switch(_.cmd){case"=":b=_.idx*2,D=_.idx1*2;var C=g[b],P=g[b+1],N=p[D],k=p[D+1];(isNaN(C)||isNaN(P))&&(C=N,P=k),u.push(C,P),f.push(N,k),v.push(e[b],e[b+1]),c.push(a[D],a[D+1]),y.push(t.getRawIndex(_.idx1));break;case"+":var A=_.idx,w=d.dataDimsForPoint,M=o.dataToPoint([t.get(w[0],A),t.get(w[1],A)]);D=A*2,u.push(M[0],M[1]),f.push(p[D],p[D+1]);var R=He(d,o,t,A);v.push(R[0],R[1]),c.push(a[D],a[D+1]),y.push(t.getRawIndex(A));break;case"-":I=!1}I&&(h.push(_),m.push(m.length))}m.sort(function(Q,T){return y[Q]-y[T]});for(var O=u.length,V=j(O),E=j(O),L=j(O),F=j(O),H=[],S=0;S<m.length;S++){var J=m[S],G=S*2,z=J*2;V[G]=u[z],V[G+1]=u[z+1],E[G]=f[z],E[G+1]=f[z+1],L[G]=v[z],L[G+1]=v[z+1],F[G]=c[z],F[G+1]=c[z+1],H[S]=h[J]}return{current:V,next:E,stackedOnCurrent:L,stackedOnNext:F,status:H}}var B=Math.min,U=Math.max;function X(i,t){return isNaN(i)||isNaN(t)}function he(i,t,e,a,o,r,n,s,l){for(var u,f,v,c,h,m,y=e,d=0;d<a;d++){var g=t[y*2],p=t[y*2+1];if(y>=o||y<0)break;if(X(g,p)){if(l){y+=r;continue}break}if(y===e)i[r>0?"moveTo":"lineTo"](g,p),v=g,c=p;else{var S=g-u,_=p-f;if(S*S+_*_<.5){y+=r;continue}if(n>0){for(var I=y+r,b=t[I*2],D=t[I*2+1];b===g&&D===p&&d<a;)d++,I+=r,y+=r,b=t[I*2],D=t[I*2+1],g=t[y*2],p=t[y*2+1],S=g-u,_=p-f;var C=d+1;if(l)for(;X(b,D)&&C<a;)C++,I+=r,b=t[I*2],D=t[I*2+1];var P=.5,N=0,k=0,A=void 0,w=void 0;if(C>=a||X(b,D))h=g,m=p;else{N=b-u,k=D-f;var M=g-u,R=b-g,O=p-f,V=D-p,E=void 0,L=void 0;if(s==="x"){E=Math.abs(M),L=Math.abs(R);var F=N>0?1:-1;h=g-F*E*n,m=p,A=g+F*L*n,w=p}else if(s==="y"){E=Math.abs(O),L=Math.abs(V);var H=k>0?1:-1;h=g,m=p-H*E*n,A=g,w=p+H*L*n}else E=Math.sqrt(M*M+O*O),L=Math.sqrt(R*R+V*V),P=L/(L+E),h=g-N*n*(1-P),m=p-k*n*(1-P),A=g+N*n*P,w=p+k*n*P,A=B(A,U(b,g)),w=B(w,U(D,p)),A=U(A,B(b,g)),w=U(w,B(D,p)),N=A-g,k=w-p,h=g-N*E/L,m=p-k*E/L,h=B(h,U(u,g)),m=B(m,U(f,p)),h=U(h,B(u,g)),m=U(m,B(f,p)),N=g-h,k=p-m,A=g+N*L/E,w=p+k*L/E}i.bezierCurveTo(v,c,h,m,g,p),v=A,c=w}else i.lineTo(g,p)}u=g,f=p,y+=r}return d}var Be=function(){function i(){this.smooth=0,this.smoothConstraint=!0}return i}(),Ft=function(i){$(t,i);function t(e){var a=i.call(this,e)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Be},t.prototype.buildPath=function(e,a){var o=a.points,r=0,n=o.length/2;if(a.connectNulls){for(;n>0&&X(o[n*2-2],o[n*2-1]);n--);for(;r<n&&X(o[r*2],o[r*2+1]);r++);}for(;r<n;)r+=he(e,o,r,n,n,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(e,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,r=o.data,n=vt.CMD,s,l,u=a==="x",f=[],v=0;v<r.length;){var c=r[v++],h=void 0,m=void 0,y=void 0,d=void 0,g=void 0,p=void 0,S=void 0;switch(c){case n.M:s=r[v++],l=r[v++];break;case n.L:if(h=r[v++],m=r[v++],S=u?(e-s)/(h-s):(e-l)/(m-l),S<=1&&S>=0){var _=u?(m-l)*S+l:(h-s)*S+s;return u?[e,_]:[_,e]}s=h,l=m;break;case n.C:h=r[v++],m=r[v++],y=r[v++],d=r[v++],g=r[v++],p=r[v++];var I=u?de(s,h,y,g,e,f):de(l,m,d,p,e,f);if(I>0)for(var b=0;b<I;b++){var D=f[b];if(D<=1&&D>=0){var _=u?Se(l,m,d,p,D):Se(s,h,y,g,D);return u?[e,_]:[_,e]}}s=g,l=p;break}}},t}(ze),Ht=function(i){$(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Be),Bt=function(i){$(t,i);function t(e){var a=i.call(this,e)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new Ht},t.prototype.buildPath=function(e,a){var o=a.points,r=a.stackedOnPoints,n=0,s=o.length/2,l=a.smoothMonotone;if(a.connectNulls){for(;s>0&&X(o[s*2-2],o[s*2-1]);s--);for(;n<s&&X(o[n*2],o[n*2+1]);n++);}for(;n<s;){var u=he(e,o,n,s,s,1,a.smooth,l,a.connectNulls);he(e,r,n+u-1,u,s,-1,a.stackedOnSmooth,l,a.connectNulls),n+=u+1,e.closePath()}},t}(ze);function Ue(i,t,e,a,o){var r=i.getArea(),n=r.x,s=r.y,l=r.width,u=r.height,f=e.get(["lineStyle","width"])||2;n-=f/2,s-=f/2,l+=f,u+=f,n=Math.floor(n),l=Math.round(l);var v=new ht({shape:{x:n,y:s,width:l,height:u}});if(t){var c=i.getBaseAxis(),h=c.isHorizontal(),m=c.inverse;h?(m&&(v.shape.x+=l),v.shape.width=0):(m||(v.shape.y+=u),v.shape.height=0);var y=q(o)?function(d){o(d,v)}:null;ne(v,{shape:{width:l,height:u,x:n,y:s}},e,null,a,y)}return v}function We(i,t,e){var a=i.getArea(),o=Y(a.r0,1),r=Y(a.r,1),n=new ft({shape:{cx:Y(i.cx,1),cy:Y(i.cy,1),r0:o,r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(t){var s=i.getBaseAxis().dim==="angle";s?n.shape.endAngle=a.startAngle:n.shape.r=o,ne(n,{shape:{endAngle:a.endAngle,r}},e)}return n}function ia(i,t,e,a,o){if(i){if(i.type==="polar")return We(i,t,e);if(i.type==="cartesian2d")return Ue(i,t,e,a,o)}else return null;return null}function ke(i,t){if(i.length===t.length){for(var e=0;e<i.length;e++)if(i[e]!==t[e])return;return!0}}function we(i){for(var t=1/0,e=1/0,a=-1/0,o=-1/0,r=0;r<i.length;){var n=i[r++],s=i[r++];isNaN(n)||(t=Math.min(n,t),a=Math.max(n,a)),isNaN(s)||(e=Math.min(s,e),o=Math.max(s,o))}return[[t,e],[a,o]]}function Le(i,t){var e=we(i),a=e[0],o=e[1],r=we(t),n=r[0],s=r[1];return Math.max(Math.abs(a[0]-n[0]),Math.abs(a[1]-n[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function Ee(i){return Ge(i)?i:i?.5:0}function Ut(i,t,e){if(!e.valueDim)return[];for(var a=t.count(),o=j(a*2),r=0;r<a;r++){var n=He(e,i,t,r);o[r*2]=n[0],o[r*2+1]=n[1]}return o}function W(i,t,e,a){var o=t.getBaseAxis(),r=o.dim==="x"||o.dim==="radius"?0:1,n=[],s=0,l=[],u=[],f=[],v=[];if(a){for(s=0;s<i.length;s+=2)!isNaN(i[s])&&!isNaN(i[s+1])&&v.push(i[s],i[s+1]);i=v}for(s=0;s<i.length-2;s+=2)switch(f[0]=i[s+2],f[1]=i[s+3],u[0]=i[s],u[1]=i[s+1],n.push(u[0],u[1]),e){case"end":l[r]=f[r],l[1-r]=u[1-r],n.push(l[0],l[1]);break;case"middle":var c=(u[r]+f[r])/2,h=[];l[r]=h[r]=c,l[1-r]=u[1-r],h[1-r]=f[1-r],n.push(l[0],l[1]),n.push(h[0],h[1]);break;default:l[r]=u[r],l[1-r]=f[1-r],n.push(l[0],l[1])}return n.push(i[s++],i[s++]),n}function Wt(i,t){var e=[],a=i.length,o,r;function n(f,v,c){var h=f.coord,m=(c-h)/(v.coord-h),y=dt(m,[f.color,v.color]);return{coord:c,color:y}}for(var s=0;s<a;s++){var l=i[s],u=l.coord;if(u<0)o=l;else if(u>t){r?e.push(n(r,l,t)):o&&e.push(n(o,l,0),n(o,l,t));break}else o&&(e.push(n(o,l,0)),o=null),e.push(l),r=l}return e}function Xt(i,t,e){var a=i.getVisual("visualMeta");if(!(!a||!a.length||!i.count())&&t.type==="cartesian2d"){for(var o,r,n=a.length-1;n>=0;n--){var s=i.getDimensionInfo(a[n].dimension);if(o=s&&s.coordDim,o==="x"||o==="y"){r=a[n];break}}if(!!r){var l=t.getAxis(o),u=re(r.stops,function(S){return{coord:l.toGlobalCoord(l.dataToCoord(S.value)),color:S.color}}),f=u.length,v=r.outerColors.slice();f&&u[0].coord>u[f-1].coord&&(u.reverse(),v.reverse());var c=Wt(u,o==="x"?e.getWidth():e.getHeight()),h=c.length;if(!h&&f)return u[0].coord<0?v[1]?v[1]:u[f-1].color:v[0]?v[0]:u[0].color;var m=10,y=c[0].coord-m,d=c[h-1].coord+m,g=d-y;if(g<.001)return"transparent";ae(c,function(S){S.offset=(S.coord-y)/g}),c.push({offset:h?c[h-1].offset:.5,color:v[1]||"transparent"}),c.unshift({offset:h?c[0].offset:.5,color:v[0]||"transparent"});var p=new pt(0,0,0,0,c,!0);return p[o]=y,p[o+"2"]=d,p}}}function Zt(i,t,e){var a=i.get("showAllSymbol"),o=a==="auto";if(!(a&&!o)){var r=e.getAxesByScale("ordinal")[0];if(!!r&&!(o&&jt(r,t))){var n=t.mapDimension(r.dim),s={};return ae(r.getViewLabels(),function(l){var u=r.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(n,l))}}}}function jt(i,t){var e=i.getExtent(),a=Math.abs(e[1]-e[0])/i.scale.count();isNaN(a)&&(a=0);for(var o=t.count(),r=Math.max(1,Math.round(o/5)),n=0;n<o;n+=r)if(ce.getSymbolSize(t,n)[i.isHorizontal()?1:0]*1.5>a)return!1;return!0}function qt(i,t){return isNaN(i)||isNaN(t)}function $t(i){for(var t=i.length/2;t>0&&qt(i[t*2-2],i[t*2-1]);t--);return t-1}function Oe(i,t){return[i[t*2],i[t*2+1]]}function Jt(i,t,e){for(var a=i.length/2,o=e==="x"?0:1,r,n,s=0,l=-1,u=0;u<a;u++)if(n=i[u*2+o],!(isNaN(n)||isNaN(i[u*2+1-o]))){if(u===0){r=n;continue}if(r<=t&&n>=t||r>=t&&n<=t){l=u;break}s=u,r=n}return{range:[s,l],t:(t-r)/(n-r)}}function Xe(i){if(i.get(["endLabel","show"]))return!0;for(var t=0;t<Ce.length;t++)if(i.get([Ce[t],"endLabel","show"]))return!0;return!1}function le(i,t,e,a){if(yt(t,"cartesian2d")){var o=a.getModel("endLabel"),r=o.get("valueAnimation"),n=a.getData(),s={lastFrameIndex:0},l=Xe(a)?function(h,m){i._endLabelOnDuring(h,m,n,s,r,o,t)}:null,u=t.getBaseAxis().isHorizontal(),f=Ue(t,e,a,function(){var h=i._endLabel;h&&e&&s.originalX!=null&&h.attr({x:s.originalX,y:s.originalY})},l);if(!a.get("clip",!0)){var v=f.shape,c=Math.max(v.width,v.height);u?(v.y-=c,v.height+=c*2):(v.x-=c,v.width+=c*2)}return l&&l(1,f),f}else return We(t,e,a)}function Qt(i,t){var e=t.getBaseAxis(),a=e.isHorizontal(),o=e.inverse,r=a?o?"right":"left":"center",n=a?"middle":o?"top":"bottom";return{normal:{align:i.get("align")||r,verticalAlign:i.get("verticalAlign")||n}}}var Kt=function(i){$(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.init=function(){var e=new ie,a=new Rt;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=e},t.prototype.render=function(e,a,o){var r=this,n=e.coordinateSystem,s=this.group,l=e.getData(),u=e.getModel("lineStyle"),f=e.getModel("areaStyle"),v=l.getLayout("points")||[],c=n.type==="polar",h=this._coordSys,m=this._symbolDraw,y=this._polyline,d=this._polygon,g=this._lineGroup,p=!a.ssr&&e.isAnimationEnabled(),S=!f.isEmpty(),_=f.get("origin"),I=Fe(n,l,_),b=S&&Ut(n,l,I),D=e.get("showSymbol"),C=e.get("connectNulls"),P=D&&!c&&Zt(e,l,n),N=this._data;N&&N.eachItemGraphicEl(function(T,Ze){T.__temp&&(s.remove(T),N.setItemGraphicEl(Ze,null))}),D||m.remove(),s.add(g);var k=c?!1:e.get("step"),A;n&&n.getArea&&e.get("clip",!0)&&(A=n.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var w=Xt(l,n,o)||l.getVisual("style")[l.getVisual("drawType")];if(!(y&&h.type===n.type&&k===this._step))D&&m.updateData(l,{isIgnore:P,clipShape:A,disableAnimation:!0,getSymbolPoint:function(T){return[v[T*2],v[T*2+1]]}}),p&&this._initSymbolLabelAnimation(l,n,A),k&&(v=W(v,n,k,C),b&&(b=W(b,n,k,C))),y=this._newPolyline(v),S?d=this._newPolygon(v,b):d&&(g.remove(d),d=this._polygon=null),c||this._initOrUpdateEndLabel(e,n,be(w)),g.setClipPath(le(this,n,!0,e));else{S&&!d?d=this._newPolygon(v,b):d&&!S&&(g.remove(d),d=this._polygon=null),c||this._initOrUpdateEndLabel(e,n,be(w));var M=g.getClipPath();if(M){var R=le(this,n,!1,e);ne(M,{shape:R.shape},e)}else g.setClipPath(le(this,n,!0,e));D&&m.updateData(l,{isIgnore:P,clipShape:A,disableAnimation:!0,getSymbolPoint:function(T){return[v[T*2],v[T*2+1]]}}),(!ke(this._stackedOnPoints,b)||!ke(this._points,v))&&(p?this._doUpdateAnimation(l,b,n,o,k,_,C):(k&&(v=W(v,n,k,C),b&&(b=W(b,n,k,C))),y.setShape({points:v}),d&&d.setShape({points:v,stackedOnPoints:b})))}var O=e.getModel("emphasis"),V=O.get("focus"),E=O.get("blurScope"),L=O.get("disabled");if(y.useStyle(De(u.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"})),_e(y,e,"lineStyle"),y.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var F=y.getState("emphasis").style;F.lineWidth=+y.style.lineWidth+1}x(y).seriesIndex=e.seriesIndex,ve(y,V,E,L);var H=Ee(e.get("smooth")),J=e.get("smoothMonotone");if(y.setShape({smooth:H,smoothMonotone:J,connectNulls:C}),d){var G=l.getCalculationInfo("stackedOnSeries"),z=0;d.useStyle(De(f.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),G&&(z=Ee(G.get("smooth"))),d.setShape({smooth:H,stackedOnSmooth:z,smoothMonotone:J,connectNulls:C}),_e(d,e,"areaStyle"),x(d).seriesIndex=e.seriesIndex,ve(d,V,E,L)}var Q=function(T){r._changePolyState(T)};l.eachItemGraphicEl(function(T){T&&(T.onHoverStateChange=Q)}),this._polyline.onHoverStateChange=Q,this._data=l,this._coordSys=n,this._stackedOnPoints=b,this._points=v,this._step=k,this._valueOrigin=_,e.get("triggerLineEvent")&&(this.packEventData(e,y),d&&this.packEventData(e,d))},t.prototype.packEventData=function(e,a){x(a).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,a,o,r){var n=e.getData(),s=Ae(n,r);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=n.getLayout("points"),u=n.getItemGraphicEl(s);if(!u){var f=l[s*2],v=l[s*2+1];if(isNaN(f)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f,v))return;var c=e.get("zlevel")||0,h=e.get("z")||0;u=new ce(n,s),u.x=f,u.y=v,u.setZ(c,h);var m=u.getSymbolPath().getTextContent();m&&(m.zlevel=c,m.z=h,m.z2=this._polyline.z2+1),u.__temp=!0,n.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else oe.prototype.highlight.call(this,e,a,o,r)},t.prototype.downplay=function(e,a,o,r){var n=e.getData(),s=Ae(n,r);if(this._changePolyState("normal"),s!=null&&s>=0){var l=n.getItemGraphicEl(s);l&&(l.__temp?(n.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else oe.prototype.downplay.call(this,e,a,o,r)},t.prototype._changePolyState=function(e){var a=this._polygon;Ie(this._polyline,e),a&&Ie(a,e)},t.prototype._newPolyline=function(e){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new Ft({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(e,a){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new Bt({shape:{points:e,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},t.prototype._initSymbolLabelAnimation=function(e,a,o){var r,n,s=a.getBaseAxis(),l=s.inverse;a.type==="cartesian2d"?(r=s.isHorizontal(),n=!1):a.type==="polar"&&(r=s.dim==="angle",n=!0);var u=e.hostModel,f=u.get("animationDuration");q(f)&&(f=f(null));var v=u.get("animationDelay")||0,c=q(v)?v(null):v;e.eachItemGraphicEl(function(h,m){var y=h;if(y){var d=[h.x,h.y],g=void 0,p=void 0,S=void 0;if(o)if(n){var _=o,I=a.pointToCoord(d);r?(g=_.startAngle,p=_.endAngle,S=-I[1]/180*Math.PI):(g=_.r0,p=_.r,S=I[0])}else{var b=o;r?(g=b.x,p=b.x+b.width,S=h.x):(g=b.y+b.height,p=b.y,S=h.y)}var D=p===g?0:(S-g)/(p-g);l&&(D=1-D);var C=q(v)?v(m):f*D+c,P=y.getSymbolPath(),N=P.getTextContent();y.attr({scaleX:0,scaleY:0}),y.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),N&&N.animateFrom({style:{opacity:0}},{duration:300,delay:C}),P.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,a,o){var r=e.getModel("endLabel");if(Xe(e)){var n=e.getData(),s=this._polyline,l=n.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new ct({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var f=$t(l);f>=0&&(Re(s,fe(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:f,defaultText:function(v,c,h){return h!=null?Et(n,h):Ve(n,v)},enableTextSetter:!0},Qt(r,a)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,a,o,r,n,s,l){var u=this._endLabel,f=this._polyline;if(u){e<1&&r.originalX==null&&(r.originalX=u.x,r.originalY=u.y);var v=o.getLayout("points"),c=o.hostModel,h=c.get("connectNulls"),m=s.get("precision"),y=s.get("distance")||0,d=l.getBaseAxis(),g=d.isHorizontal(),p=d.inverse,S=a.shape,_=p?g?S.x:S.y+S.height:g?S.x+S.width:S.y,I=(g?y:0)*(p?-1:1),b=(g?0:-y)*(p?-1:1),D=g?"x":"y",C=Jt(v,_,D),P=C.range,N=P[1]-P[0],k=void 0;if(N>=1){if(N>1&&!h){var A=Oe(v,P[0]);u.attr({x:A[0]+I,y:A[1]+b}),n&&(k=c.getRawValue(P[0]))}else{var A=f.getPointOn(_,D);A&&u.attr({x:A[0]+I,y:A[1]+b});var w=c.getRawValue(P[0]),M=c.getRawValue(P[1]);n&&(k=gt(o,m,w,M,C.t))}r.lastFrameIndex=P[0]}else{var R=e===1||r.lastFrameIndex>0?P[0]:0,A=Oe(v,R);n&&(k=c.getRawValue(R)),u.attr({x:A[0]+I,y:A[1]+b})}if(n){var O=mt(u);typeof O.setLabelText=="function"&&O.setLabelText(k)}}},t.prototype._doUpdateAnimation=function(e,a,o,r,n,s,l){var u=this._polyline,f=this._polygon,v=e.hostModel,c=Vt(this._data,e,this._stackedOnPoints,a,this._coordSys,o,this._valueOrigin),h=c.current,m=c.stackedOnCurrent,y=c.next,d=c.stackedOnNext;if(n&&(h=W(c.current,o,n,l),m=W(c.stackedOnCurrent,o,n,l),y=W(c.next,o,n,l),d=W(c.stackedOnNext,o,n,l)),Le(h,y)>3e3||f&&Le(m,d)>3e3){u.stopAnimation(),u.setShape({points:y}),f&&(f.stopAnimation(),f.setShape({points:y,stackedOnPoints:d}));return}u.shape.__points=c.current,u.shape.points=h;var g={shape:{points:y}};c.current!==h&&(g.shape.__points=c.next),u.stopAnimation(),ee(u,g,v),f&&(f.setShape({points:h,stackedOnPoints:m}),f.stopAnimation(),ee(f,{shape:{stackedOnPoints:d}},v),u.shape.points!==f.shape.points&&(f.shape.points=u.shape.points));for(var p=[],S=c.status,_=0;_<S.length;_++){var I=S[_].cmd;if(I==="="){var b=e.getItemGraphicEl(S[_].idx1);b&&p.push({el:b,ptIdx:_})}}u.animators&&u.animators.length&&u.animators[0].during(function(){f&&f.dirtyShape();for(var D=u.shape.__points,C=0;C<p.length;C++){var P=p[C].el,N=p[C].ptIdx*2;P.x=D[N],P.y=D[N+1],P.markRedraw()}})},t.prototype.remove=function(e){var a=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(r,n){r.__temp&&(a.remove(r),o.setItemGraphicEl(n,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(oe),Yt=Kt;function xt(i,t){return{seriesType:i,plan:St(),reset:function(e){var a=e.getData(),o=e.coordinateSystem,r=e.pipelineContext,n=t||r.large;if(!!o){var s=re(o.dimensions,function(h){return a.mapDimension(h)}).slice(0,2),l=s.length,u=a.getCalculationInfo("stackResultDimension");te(a,s[0])&&(s[0]=u),te(a,s[1])&&(s[1]=u);var f=a.getStore(),v=a.getDimensionIndex(s[0]),c=a.getDimensionIndex(s[1]);return l&&{progress:function(h,m){for(var y=h.end-h.start,d=n&&j(y*l),g=[],p=[],S=h.start,_=0;S<h.end;S++){var I=void 0;if(l===1){var b=f.get(v,S);I=o.dataToPoint(b,null,p)}else g[0]=f.get(v,S),g[1]=f.get(c,S),I=o.dataToPoint(g,null,p);n?(d[_++]=I[0],d[_++]=I[1]):m.setItemLayout(S,I.slice())}n&&m.setLayout("points",d)}}}}}}var ea={average:function(i){for(var t=0,e=0,a=0;a<i.length;a++)isNaN(i[a])||(t+=i[a],e++);return e===0?NaN:t/e},sum:function(i){for(var t=0,e=0;e<i.length;e++)t+=i[e]||0;return t},max:function(i){for(var t=-1/0,e=0;e<i.length;e++)i[e]>t&&(t=i[e]);return isFinite(t)?t:NaN},min:function(i){for(var t=1/0,e=0;e<i.length;e++)i[e]<t&&(t=i[e]);return isFinite(t)?t:NaN},nearest:function(i){return i[0]}},ta=function(i){return Math.round(i.length/2)};function aa(i){return{seriesType:i,reset:function(t,e,a){var o=t.getData(),r=t.get("sampling"),n=t.coordinateSystem,s=o.count();if(s>10&&n.type==="cartesian2d"&&r){var l=n.getBaseAxis(),u=n.getOtherAxis(l),f=l.getExtent(),v=a.getDevicePixelRatio(),c=Math.abs(f[1]-f[0])*(v||1),h=Math.round(s/c);if(isFinite(h)&&h>1){r==="lttb"&&t.setData(o.lttbDownSample(o.mapDimension(u.dim),1/h));var m=void 0;bt(r)?m=ea[r]:q(r)&&(m=r),m&&t.setData(o.downSample(o.mapDimension(u.dim),1/h,m,ta))}}}}}function na(i){i.registerChartView(Yt),i.registerSeriesModel(Lt),i.registerLayout(xt("line",!0)),i.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",a)}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,aa("line"))}export{Rt as S,ia as a,Et as b,Pt as c,aa as d,Ve as g,na as i,xt as p};
