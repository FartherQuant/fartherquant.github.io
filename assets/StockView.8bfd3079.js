import{h as gn}from"./http.9758f133.js";import{bu as jt,bv as vt,at as Mt,_ as O,G as Nt,e as x,p as dt,v as E,h as R,m as I,b6 as We,bw as mn,a as yn,P as xn,af as B,a8 as te,d as it,aL as bn,aI as He,bx as _n,aV as zt,i as Z,g as Zt,by as ee,bz as Sn,a3 as Cn,b as Tn,u as An,s as Mn,a6 as wn,C as On,a1 as Fe,c as In,S as Dn,y as kn,ak as wt,bA as Ue,bB as yt,bC as Bn,J as xt,bh as ne,bq as rt,b1 as F,bD as Pn,bE as ht,z as Wt,H as Ht,an as j,bF as Rn,bG as En,bH as Ln,ax as Vn,M as $e,bI as Nn,bd as re,be as ae,w as Ot,bJ as zn,aB as ie,bK as Zn,bL as Wn,bM as Hn,x as pt,bN as Fn,bk as Un,bO as $n,bP as oe,bi as Gn,a$ as Yn,bQ as Ge,bR as Xn,bS as Kn,O as Ye,aw as Qn,bT as ut,bU as qn,Q as Jn,T as jn,U as tr,V as er,W as nr,X as rr,Y as ar}from"./index.esm.min.c41b8ffa.js";import{c as ir}from"./createSeriesDataSimply.3bc9c3b0.js";import{s as Xe,c as or,b as sr,r as ur,i as lr,a as cr}from"./install.4fb16b01.js";import{O as hr,r as se,_ as pr,P as fr,ai as vr,S as tt,U as lt,R as bt,aq as dr,W as ct,V as ue}from"./index.15432856.js";import{i as gr}from"./install.dbf96a44.js";import{i as mr}from"./installMarkLine.a1ee2d32.js";import"./index.2cf0d985.js";import"./MarkerView.a435cabd.js";var yr=1e-8;function le(n,e){return Math.abs(n-e)<yr}function et(n,e,t){var r=0,a=n[0];if(!a)return!1;for(var i=1;i<n.length;i++){var o=n[i];r+=jt(a[0],a[1],o[0],o[1],e,t),a=o}var s=n[0];return(!le(a[0],s[0])||!le(a[1],s[1]))&&(r+=jt(a[0],a[1],s[0],s[1],e,t)),r!==0}var ce="\0_ec_interaction_mutex";function xr(n,e,t){var r=Ke(n);r[e]=t}function br(n,e,t){var r=Ke(n),a=r[e];a===t&&(r[e]=null)}function Ke(n){return n[ce]||(n[ce]={})}vt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Mt);var _r={axisPointer:1,tooltip:1,brush:1};function Sr(n,e,t){var r=e.getComponentByElement(n.topTarget),a=r&&r.coordinateSystem;return r&&r!==t&&!_r.hasOwnProperty(r.mainType)&&a&&a.model!==t}var U=!0,at=Math.min,q=Math.max,Cr=Math.pow,Tr=1e4,Ar=6,Mr=6,he="globalPan",wr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Or={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},pe={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Ir=0,Dr=function(n){O(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new Nt,r._uid="brushController_"+Ir++,x(Vr,function(a,i){this._handlers[i]=dt(a,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||xr(r,he,this._uid),x(this._handlers,function(a,i){r.on(i,a)}),this._brushType=t.brushType,this._brushOption=E(R(pe),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;br(t,he,this._uid),x(this._handlers,function(r,a){t.off(a,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};x(t,function(a){r[a.panelId]=R(a)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=I(t,function(h){return E(R(pe),h,!0)});var r="\0-brush-index-",a=this._covers,i=this._covers=[],o=this,s=this._creatingCover;return new We(a,t,c,u).add(l).update(l).remove(p).execute(),this;function u(h,v){return(h.id!=null?h.id:r+v)+"-"+h.brushType}function c(h,v){return u(h.__brushOption,v)}function l(h,v){var f=t[h];if(v!=null&&a[v]===s)i[h]=a[v];else{var m=i[h]=v!=null?(a[v].__brushOption=f,a[v]):qe(o,Qe(o,f));Ft(o,m)}}function p(h){a[h]!==s&&o.group.remove(a[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),It(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(mn);function Qe(n,e){var t=gt[e.brushType].createCover(n,e);return t.__brushOption=e,je(t,e),n.group.add(t),t}function qe(n,e){var t=Ut(e);return t.endCreating&&(t.endCreating(n,e),je(e,e.__brushOption)),e}function Je(n,e){var t=e.__brushOption;Ut(e).updateCoverShape(n,e,t.range,t)}function je(n,e){var t=e.z;t==null&&(t=Tr),n.traverse(function(r){r.z=t,r.z2=t})}function Ft(n,e){Ut(e).updateCommon(n,e),Je(n,e)}function Ut(n){return gt[n.__brushOption.brushType]}function $t(n,e,t){var r=n._panels;if(!r)return U;var a,i=n._transform;return x(r,function(o){o.isTargetByCursor(e,t,i)&&(a=o)}),a}function tn(n,e){var t=n._panels;if(!t)return U;var r=e.__brushOption.panelId;return r!=null?t[r]:U}function It(n){var e=n._covers,t=e.length;return x(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function $(n,e){var t=I(n._covers,function(r){var a=r.__brushOption,i=R(a.range);return{brushType:a.brushType,panelId:a.panelId,range:i}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function kr(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],a=t[0]-r[0],i=t[1]-r[1],o=Cr(a*a+i*i,.5);return o>Ar}function en(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function nn(n,e,t,r){var a=new Nt;return a.add(new te({name:"main",style:Gt(t),silent:!0,draggable:!0,cursor:"move",drift:B(fe,n,e,a,["n","s","w","e"]),ondragend:B($,e,{isEnd:!0})})),x(r,function(i){a.add(new te({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:B(fe,n,e,a,i),ondragend:B($,e,{isEnd:!0})}))}),a}function rn(n,e,t,r){var a=r.brushStyle.lineWidth||0,i=q(a,Mr),o=t[0][0],s=t[1][0],u=o-a/2,c=s-a/2,l=t[0][1],p=t[1][1],h=l-i+a/2,v=p-i+a/2,f=l-o,m=p-s,C=f+a,_=m+a;N(n,e,"main",o,s,f,m),r.transformable&&(N(n,e,"w",u,c,i,_),N(n,e,"e",h,c,i,_),N(n,e,"n",u,c,C,i),N(n,e,"s",u,v,C,i),N(n,e,"nw",u,c,i,i),N(n,e,"ne",h,c,i,i),N(n,e,"sw",u,v,i,i),N(n,e,"se",h,v,i,i))}function Dt(n,e){var t=e.__brushOption,r=t.transformable,a=e.childAt(0);a.useStyle(Gt(t)),a.attr({silent:!r,cursor:r?"move":"default"}),x([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=e.childOfName(i.join("")),s=i.length===1?kt(n,i[0]):Pr(n,i);o&&o.attr({silent:!r,invisible:!r,cursor:r?Or[s]+"-resize":null})})}function N(n,e,t,r,a,i,o){var s=e.childOfName(t);s&&s.setShape(Er(Yt(n,e,[[r,a],[r+i,a+o]])))}function Gt(n){return it({strokeNoScale:!0},n.brushStyle)}function an(n,e,t,r){var a=[at(n,t),at(e,r)],i=[q(n,t),q(e,r)];return[[a[0],i[0]],[a[1],i[1]]]}function Br(n){return He(n.group)}function kt(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},a=bn(t[e],Br(n));return r[a]}function Pr(n,e){var t=[kt(n,e[0]),kt(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function fe(n,e,t,r,a,i){var o=t.__brushOption,s=n.toRectRange(o.range),u=on(e,a,i);x(r,function(c){var l=wr[c];s[l[0]][l[1]]+=u[l[0]]}),o.range=n.fromRectRange(an(s[0][0],s[1][0],s[0][1],s[1][1])),Ft(e,t),$(e,{isEnd:!1})}function Rr(n,e,t,r){var a=e.__brushOption.range,i=on(n,t,r);x(a,function(o){o[0]+=i[0],o[1]+=i[1]}),Ft(n,e),$(n,{isEnd:!1})}function on(n,e,t){var r=n.group,a=r.transformCoordToLocal(e,t),i=r.transformCoordToLocal(0,0);return[a[0]-i[0],a[1]-i[1]]}function Yt(n,e,t){var r=tn(n,e);return r&&r!==U?r.clipPath(t,n._transform):R(t)}function Er(n){var e=at(n[0][0],n[1][0]),t=at(n[0][1],n[1][1]),r=q(n[0][0],n[1][0]),a=q(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:a-t}}function Lr(n,e,t){if(!(!n._brushType||Nr(n,e.offsetX,e.offsetY))){var r=n._zr,a=n._covers,i=$t(n,e,t);if(!n._dragging)for(var o=0;o<a.length;o++){var s=a[o].__brushOption;if(i&&(i===U||s.panelId===i.panelId)&&gt[s.brushType].contain(a[o],t[0],t[1]))return}i&&r.setCursorStyle("crosshair")}}function Bt(n){var e=n.event;e.preventDefault&&e.preventDefault()}function Pt(n,e,t){return n.childOfName("main").contain(e,t)}function sn(n,e,t,r){var a=n._creatingCover,i=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),kr(n)||a){if(i&&!a){o.brushMode==="single"&&It(n);var u=R(o);u.brushType=ve(u.brushType,i),u.panelId=i===U?null:i.panelId,a=n._creatingCover=Qe(n,u),n._covers.push(a)}if(a){var c=gt[ve(n._brushType,i)],l=a.__brushOption;l.range=c.getCreatingRange(Yt(n,a,n._track)),r&&(qe(n,a),c.updateCommon(n,a)),Je(n,a),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&$t(n,e,t)&&It(n)&&(s={isEnd:r,removeOnClick:!0});return s}function ve(n,e){return n==="auto"?e.defaultBrushType:n}var Vr={mousedown:function(n){if(this._dragging)de(this,n);else if(!n.target||!n.target.draggable){Bt(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=$t(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(Lr(this,n,r),this._dragging){Bt(n);var a=sn(this,n,r,!1);a&&$(this,a)}},mouseup:function(n){de(this,n)}};function de(n,e){if(n._dragging){Bt(e);var t=e.offsetX,r=e.offsetY,a=n.group.transformCoordToLocal(t,r),i=sn(n,e,a,!0);n._dragging=!1,n._track=[],n._creatingCover=null,i&&$(n,i)}}function Nr(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var gt={lineX:ge(0),lineY:ge(1),rect:{createCover:function(n,e){function t(r){return r}return nn({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=en(n);return an(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){rn(n,e,t,r)},updateCommon:Dt,contain:Pt},polygon:{createCover:function(n,e){var t=new Nt;return t.add(new yn({name:"main",style:Gt(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new xn({name:"main",draggable:!0,drift:B(Rr,n,e),ondragend:B($,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:Yt(n,e,t)})},updateCommon:Dt,contain:Pt}};function ge(n){return{createCover:function(e,t){return nn({toRectRange:function(r){var a=[r,[0,100]];return n&&a.reverse(),a},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=en(e),r=at(t[0][n],t[1][n]),a=q(t[0][n],t[1][n]);return[r,a]},updateCoverShape:function(e,t,r,a){var i,o=tn(e,t);if(o!==U&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(n);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-n]]}var u=[r,i];n&&u.reverse(),rn(e,t,u,a)},updateCommon:Dt,contain:Pt}}var un=Dr;function zr(n){return n=Xt(n),function(e){return _n(e,n)}}function Zr(n,e){return n=Xt(n),function(t){var r=e!=null?e:t,a=r?n.width:n.height,i=r?n.x:n.y;return[i,i+(a||0)]}}function Wr(n,e,t){var r=Xt(n);return function(a,i){return r.contain(i[0],i[1])&&!Sr(a,e,t)}}function Xt(n){return zt.create(n)}var Hr=function(){function n(){}return n.prototype.getInitialData=function(e,t){var r,a=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),o=a.get("type"),s=i.get("type"),u;o==="category"?(e.layout="horizontal",r=a.getOrdinalMeta(),u=!0):s==="category"?(e.layout="vertical",r=i.getOrdinalMeta(),u=!0):e.layout=e.layout||"horizontal";var c=["x","y"],l=e.layout==="horizontal"?0:1,p=this._baseAxisDim=c[l],h=c[1-l],v=[a,i],f=v[l].get("type"),m=v[1-l].get("type"),C=e.data;if(C&&u){var _=[];x(C,function(g,d){var b;Z(g)?(b=g.slice(),g.unshift(d)):Z(g.value)?(b=Zt({},g),b.value=b.value.slice(),g.value.unshift(d)):b=g,_.push(b)}),e.data=_}var y=this.defaultValueDimensions,S=[{name:p,type:ee(f),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:ee(m),dimsDef:y.slice()}];return ir(this,{coordDimensions:S,dimensionsCount:y.length+1,encodeDefaulter:B(Sn,S,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n}(),Fr=["color","borderColor"],Ur=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,a){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,a){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,a,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Cn(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),a=this._data,i=this.group,o=r.getLayout("isSimpleBox"),s=t.get("clip",!0),u=t.coordinateSystem,c=u.getArea&&u.getArea();this._data||i.removeAll(),r.diff(a).add(function(l){if(r.hasValue(l)){var p=r.getItemLayout(l);if(s&&me(c,p))return;var h=_t(p,l,!0);Tn(h,{shape:{points:p.ends}},t,l),St(h,r,l,o),i.add(h),r.setItemGraphicEl(l,h)}}).update(function(l,p){var h=a.getItemGraphicEl(p);if(!r.hasValue(l)){i.remove(h);return}var v=r.getItemLayout(l);if(s&&me(c,v)){i.remove(h);return}h?(An(h,{shape:{points:v.ends}},t,l),Mn(h)):h=_t(v),St(h,r,l,o),i.add(h),r.setItemGraphicEl(l,h)}).remove(function(l){var p=a.getItemGraphicEl(l);p&&i.remove(p)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),xe(t,this.group);var r=t.get("clip",!0)?wn(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var a=r.getData(),i=a.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=a.getItemLayout(o),u=_t(s);St(u,a,o,i),u.incremental=!0,this.group.add(u),this._progressiveEls.push(u)}},e.prototype._incrementalRenderLarge=function(t,r){xe(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(On),$r=function(){function n(){}return n}(),Gr=function(n){O(e,n);function e(t){var r=n.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new $r},e.prototype.buildPath=function(t,r){var a=r.points;this.__simpleBox?(t.moveTo(a[4][0],a[4][1]),t.lineTo(a[6][0],a[6][1])):(t.moveTo(a[0][0],a[0][1]),t.lineTo(a[1][0],a[1][1]),t.lineTo(a[2][0],a[2][1]),t.lineTo(a[3][0],a[3][1]),t.closePath(),t.moveTo(a[4][0],a[4][1]),t.lineTo(a[5][0],a[5][1]),t.moveTo(a[6][0],a[6][1]),t.lineTo(a[7][0],a[7][1]))},e}(Fe);function _t(n,e,t){var r=n.ends;return new Gr({shape:{points:t?Yr(r,n):r},z2:100})}function me(n,e){for(var t=!0,r=0;r<e.ends.length;r++)if(n.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function St(n,e,t,r){var a=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,In(n,a)}function Yr(n,e){return I(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var Xr=function(){function n(){}return n}(),ye=function(n){O(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new Xr},e.prototype.buildPath=function(t,r){for(var a=r.points,i=0;i<a.length;)if(this.__sign===a[i++]){var o=a[i++];t.moveTo(o,a[i++]),t.lineTo(o,a[i++])}else i+=3},e}(Fe);function xe(n,e,t,r){var a=n.getData(),i=a.getLayout("largePoints"),o=new ye({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new ye({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(s),be(1,o,n),be(-1,s,n),r&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function be(n,e,t,r){var a=t.get(["itemStyle",n>0?"borderColor":"borderColor0"])||t.get(["itemStyle",n>0?"color":"color0"]),i=t.getModel("itemStyle").getItemStyle(Fr);e.useStyle(i),e.style.fill=null,e.style.stroke=a}var Kr=Ur,ln=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,a){var i=r.getItemLayout(t);return i&&a.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Dn);kn(ln,Hr,!0);var Qr=ln;function qr(n){!n||!Z(n.series)||x(n.series,function(e){wt(e)&&e.type==="k"&&(e.type="candlestick")})}var Jr=["itemStyle","borderColor"],jr=["itemStyle","borderColor0"],ta=["itemStyle","color"],ea=["itemStyle","color0"],na={seriesType:"candlestick",plan:Ue(),performRawSeries:!0,reset:function(n,e){function t(i,o){return o.get(i>0?ta:ea)}function r(i,o){return o.get(i>0?Jr:jr)}if(!e.isSeriesFiltered(n)){var a=n.pipelineContext.large;return!a&&{progress:function(i,o){for(var s;(s=i.next())!=null;){var u=o.getItemModel(s),c=o.getItemLayout(s).sign,l=u.getItemStyle();l.fill=t(c,u),l.stroke=r(c,u)||l.fill;var p=o.ensureUniqueItemVisual(s,"style");Zt(p,l)}}}}}},ra=na,aa={seriesType:"candlestick",plan:Ue(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),r=ia(n,t),a=0,i=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[a])),u=I(t.mapDimensionsAll(o[i]),t.getDimensionIndex,t),c=u[0],l=u[1],p=u[2],h=u[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||u.length<4)return;return{progress:n.pipelineContext.large?f:v};function v(m,C){for(var _,y=C.getStore();(_=m.next())!=null;){var S=y.get(s,_),g=y.get(c,_),d=y.get(l,_),b=y.get(p,_),T=y.get(h,_),M=Math.min(g,d),A=Math.max(g,d),w=Y(M,S),D=Y(A,S),L=Y(b,S),ot=Y(T,S),G=[];Jt(G,D,0),Jt(G,w,1),G.push(st(ot),st(D),st(L),st(w)),C.setItemLayout(_,{sign:_e(y,_,g,d,l),initBaseline:g>d?D[i]:w[i],ends:G,brushRect:dn(b,T,S)})}function Y(P,W){var z=[];return z[a]=W,z[i]=P,isNaN(W)||isNaN(P)?[NaN,NaN]:e.dataToPoint(z)}function Jt(P,W,z){var V=W.slice(),H=W.slice();V[a]=yt(V[a]+r/2,1,!1),H[a]=yt(H[a]-r/2,1,!0),z?P.push(V,H):P.push(H,V)}function dn(P,W,z){var V=Y(P,z),H=Y(W,z);return V[a]-=r/2,H[a]-=r/2,{x:V[0],y:V[1],width:r,height:H[1]-V[1]}}function st(P){return P[a]=yt(P[a],1),P}}function f(m,C){for(var _=Bn(m.count*4),y=0,S,g=[],d=[],b,T=C.getStore();(b=m.next())!=null;){var M=T.get(s,b),A=T.get(c,b),w=T.get(l,b),D=T.get(p,b),L=T.get(h,b);if(isNaN(M)||isNaN(D)||isNaN(L)){_[y++]=NaN,y+=3;continue}_[y++]=_e(T,b,A,w,l),g[a]=M,g[i]=D,S=e.dataToPoint(g,null,d),_[y++]=S?S[0]:NaN,_[y++]=S?S[1]:NaN,g[i]=L,S=e.dataToPoint(g,null,d),_[y++]=S?S[1]:NaN}C.setLayout("largePoints",_)}}};function _e(n,e,t,r,a){var i;return t>r?i=-1:t<r?i=1:i=e>0?n.get(a,e-1)<=r?1:-1:1,i}function ia(n,e){var t=n.getBaseAxis(),r,a=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),i=xt(ne(n.get("barMaxWidth"),a),a),o=xt(ne(n.get("barMinWidth"),1),a),s=n.get("barWidth");return s!=null?xt(s,a):Math.max(Math.min(a/2,i),o)}var oa=aa;function sa(n){n.registerChartView(Kr),n.registerSeriesModel(Qr),n.registerPreprocessor(qr),n.registerVisual(ra),n.registerLayout(oa)}var Se=["x","y","radius","angle","single"],ua=["cartesian2d","polar","singleAxis"];function la(n){var e=n.get("coordinateSystem");return F(ua,e)>=0}function Q(n){return n+"Axis"}function ca(n,e){var t=rt(),r=[],a=rt();n.eachComponent({mainType:"dataZoom",query:e},function(l){a.get(l.uid)||s(l)});var i;do i=!1,n.eachComponent("dataZoom",o);while(i);function o(l){!a.get(l.uid)&&u(l)&&(s(l),i=!0)}function s(l){a.set(l.uid,!0),r.push(l),c(l)}function u(l){var p=!1;return l.eachTargetAxis(function(h,v){var f=t.get(h);f&&f[v]&&(p=!0)}),p}function c(l){l.eachTargetAxis(function(p,h){(t.get(p)||t.set(p,[]))[h]=!0})}return r}var Ct=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),ha=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,a){var i=Ce(t);this.settledOption=i,this.mergeDefaultAndTheme(t,a),this._doInit(i)},e.prototype.mergeOption=function(t){var r=Ce(t);E(this.option,t,!0),E(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var a=this.settledOption;x([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(r[i[0]]=a[i[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=rt(),a=this._fillSpecifiedTargetAxis(r);a?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return x(Se,function(a){var i=this.getReferringComponents(Q(a),Pn);if(!!i.specified){r=!0;var o=new Ct;x(i.models,function(s){o.add(s.componentIndex)}),t.set(a,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var a=this.ecModel,i=!0;if(i){var o=r==="vertical"?"y":"x",s=a.findComponents({mainType:o+"Axis"});u(s,o)}if(i){var s=a.findComponents({mainType:"singleAxis",filter:function(l){return l.get("orient",!0)===r}});u(s,"single")}function u(c,l){var p=c[0];if(!!p){var h=new Ct;if(h.add(p.componentIndex),t.set(l,h),i=!1,l==="x"||l==="y"){var v=p.getReferringComponents("grid",ht).models[0];v&&x(c,function(f){p.componentIndex!==f.componentIndex&&v===f.getReferringComponents("grid",ht).models[0]&&h.add(f.componentIndex)})}}}i&&x(Se,function(c){if(!!i){var l=a.findComponents({mainType:Q(c),filter:function(h){return h.get("type",!0)==="category"}});if(l[0]){var p=new Ct;p.add(l[0].componentIndex),t.set(c,p),i=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,a=this.get("rangeMode");x([["start","startValue"],["end","endValue"]],function(i,o){var s=t[i[0]]!=null,u=t[i[1]]!=null;s&&!u?r[o]="percent":!s&&u?r[o]="value":a?r[o]=a[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,a){t==null&&(t=this.ecModel.getComponent(Q(r),a))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(a,i){x(a.indexList,function(o){t.call(r,i,o)})})},e.prototype.getAxisProxy=function(t,r){var a=this.getAxisModel(t,r);if(a)return a.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var a=this._targetAxisInfoMap.get(t);if(a&&a.indexMap[r])return this.ecModel.getComponent(Q(t),r)},e.prototype.setRawRange=function(t){var r=this.option,a=this.settledOption;x([["start","startValue"],["end","endValue"]],function(i){(t[i[0]]!=null||t[i[1]]!=null)&&(r[i[0]]=a[i[0]]=t[i[0]],r[i[1]]=a[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;x(["start","startValue","end","endValue"],function(a){r[a]=t[a]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,a=this._targetAxisInfoMap.keys(),i=0;i<a.length;i++)for(var o=a[i],s=this._targetAxisInfoMap.get(o),u=0;u<s.indexList.length;u++){var c=this.getAxisProxy(o,s.indexList[u]);if(c.hostedBy(this))return c;r||(r=c)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Wt);function Ce(n){var e={};return x(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var pa=ha,fa=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(pa),va=fa,da=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,a,i){this.dataZoomModel=t,this.ecModel=r,this.api=a},e.type="dataZoom",e}(Ht),ga=da,ma=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(ga),ya=ma,X=x,Te=Vn,xa=function(){function n(e,t,r,a){this._dimName=e,this._axisIndex=t,this.ecModel=a,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(la(t)){var r=Q(this._dimName),a=t.getReferringComponents(r,ht).models[0];a&&this._axisIndex===a.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return R(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),a=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],u=[],c;X(["start","end"],function(h,v){var f=e[h],m=e[h+"Value"];i[v]==="percent"?(f==null&&(f=o[v]),m=a.parse(j(f,o,t))):(c=!0,m=m==null?t[v]:a.parse(m),f=j(m,t,o)),u[v]=m,s[v]=f}),Te(u),Te(s);var l=this._minMaxSpan;c?p(u,s,t,o,!1):p(s,u,o,t,!0);function p(h,v,f,m,C){var _=C?"Span":"ValueSpan";Xe(0,h,f,"all",l["min"+_],l["max"+_]);for(var y=0;y<2;y++)v[y]=j(h[y],f,m,!0),C&&(v[y]=a.parse(v[y]))}return{valueWindow:u,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=ba(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,a=this.getTargetSeriesModels(),i=e.get("filterMode"),o=this._valueWindow;if(i==="none")return;X(a,function(u){var c=u.getData(),l=c.mapDimensionsAll(r);if(!!l.length){if(i==="weakFilter"){var p=c.getStore(),h=I(l,function(v){return c.getDimensionIndex(v)},c);c.filterSelf(function(v){for(var f,m,C,_=0;_<l.length;_++){var y=p.get(h[_],v),S=!isNaN(y),g=y<o[0],d=y>o[1];if(S&&!g&&!d)return!0;S&&(C=!0),g&&(f=!0),d&&(m=!0)}return C&&f&&m})}else X(l,function(v){if(i==="empty")u.setData(c=c.map(v,function(m){return s(m)?m:NaN}));else{var f={};f[v]=o,c.selectRange(f)}});X(l,function(v){c.setApproximateExtent(o,v)})}});function s(u){return u>=o[0]&&u<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;X(["min","max"],function(a){var i=t.get(a+"Span"),o=t.get(a+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=j(r[0]+o,r,[0,100],!0):i!=null&&(o=j(i,[0,100],r,!0)-r[0]),e[a+"Span"]=i,e[a+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(!!t){var a=Rn(r,[0,500]);a=Math.min(a,20);var i=e.axis.scale.rawExtentInfo;t[0]!==0&&i.setDeterminedMinMax("min",+r[0].toFixed(a)),t[1]!==100&&i.setDeterminedMinMax("max",+r[1].toFixed(a)),i.freeze()}},n}();function ba(n,e,t){var r=[1/0,-1/0];X(t,function(o){En(r,o.getData(),e)});var a=n.getAxisModel(),i=Ln(a.axis.scale,a,r).calculate();return[i.min,i.max]}var _a=xa,Sa={getTargetSeries:function(n){function e(a){n.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,s){var u=n.getComponent(Q(o),s);a(o,s,u,i)})})}e(function(a,i,o,s){o.__dzAxisProxy=null});var t=[];e(function(a,i,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new _a(a,i,s,n),t.push(o.__dzAxisProxy))});var r=rt();return x(t,function(a){x(a.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,a){t.getAxisProxy(r,a).reset(t)}),t.eachTargetAxis(function(r,a){t.getAxisProxy(r,a).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var a=r.getDataPercentWindow(),i=r.getDataValueWindow();t.setCalculatedRange({start:a[0],end:a[1],startValue:i[0],endValue:i[1]})}})}},Ca=Sa;function Ta(n){n.registerAction("dataZoom",function(e,t){var r=ca(t,e);x(r,function(a){a.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Ae=!1;function Aa(n){Ae||(Ae=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Ca),Ta(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Ma(n){n.registerComponentModel(va),n.registerComponentView(ya),Aa(n)}var k=function(){function n(){}return n}(),cn={};function K(n,e){cn[n]=e}function hn(n){return cn[n]}var wa=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;x(this.option.feature,function(r,a){var i=hn(a);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),E(r,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Wt),Oa=wa,Ia=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,a,i){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),u=t.get("orient")==="vertical",c=t.get("feature")||{},l=this._features||(this._features={}),p=[];x(c,function(f,m){p.push(m)}),new We(this._featureNames||[],p).add(h).update(h).remove(B(h,null)).execute(),this._featureNames=p;function h(f,m){var C=p[f],_=p[m],y=c[C],S=new $e(y,t,t.ecModel),g;if(i&&i.newTitle!=null&&i.featureName===C&&(y.title=i.newTitle),C&&!_){if(Da(C))g={onclick:S.option.onclick,featureName:C};else{var d=hn(C);if(!d)return;g=new d}l[C]=g}else if(g=l[_],!g)return;g.uid=Nn("toolbox-feature"),g.model=S,g.ecModel=r,g.api=a;var b=g instanceof k;if(!C&&_){b&&g.dispose&&g.dispose(r,a);return}if(!S.get("show")||b&&g.unusable){b&&g.remove&&g.remove(r,a);return}v(S,g,C),S.setIconStatus=function(T,M){var A=this.option,w=this.iconPaths;A.iconStatus=A.iconStatus||{},A.iconStatus[T]=M,w[T]&&(M==="emphasis"?re:ae)(w[T])},g instanceof k&&g.render&&g.render(S,r,a,i)}function v(f,m,C){var _=f.getModel("iconStyle"),y=f.getModel(["emphasis","iconStyle"]),S=m instanceof k&&m.getIcons?m.getIcons():f.get("icon"),g=f.get("title")||{},d,b;Ot(S)?(d={},d[C]=S):d=S,Ot(g)?(b={},b[C]=g):b=g;var T=f.iconPaths={};x(d,function(M,A){var w=zn(M,{},{x:-s/2,y:-s/2,width:s,height:s});w.setStyle(_.getItemStyle());var D=w.ensureState("emphasis");D.style=y.getItemStyle();var L=new ie({style:{text:b[A],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});w.setTextContent(L),Zn({el:w,componentModel:t,itemName:A,formatterParamsExtra:{title:b[A]}}),w.__title=b[A],w.on("mouseover",function(){var ot=y.getItemStyle(),G=u?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";L.setStyle({fill:y.get("textFill")||ot.fill||ot.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),w.setTextConfig({position:y.get("textPosition")||G}),L.ignore=!t.get("showTitle"),a.enterEmphasis(this)}).on("mouseout",function(){f.get(["iconStatus",A])!=="emphasis"&&a.leaveEmphasis(this),L.hide()}),(f.get(["iconStatus",A])==="emphasis"?re:ae)(w),o.add(w),w.on("click",dt(m.onclick,m,r,a,A)),T[A]=w})}Wn(o,t,a),o.add(Hn(o.getBoundingRect(),t)),u||o.eachChild(function(f){var m=f.__title,C=f.ensureState("emphasis"),_=C.textConfig||(C.textConfig={}),y=f.getTextContent(),S=y&&y.ensureState("emphasis");if(S&&!pt(S)&&m){var g=S.style||(S.style={}),d=Fn(m,ie.makeFont(g)),b=f.x+o.x,T=f.y+o.y+s,M=!1;T+d.height>a.getHeight()&&(_.position="top",M=!0);var A=M?-5-d.height:s+10;b+d.width/2>a.getWidth()?(_.position=["100%",A],g.align="right"):b-d.width/2<0&&(_.position=[0,A],g.align="left")}})},e.prototype.updateView=function(t,r,a,i){x(this._features,function(o){o instanceof k&&o.updateView&&o.updateView(o.model,r,a,i)})},e.prototype.remove=function(t,r){x(this._features,function(a){a instanceof k&&a.remove&&a.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){x(this._features,function(a){a instanceof k&&a.dispose&&a.dispose(t,r)})},e.type="toolbox",e}(Ht);function Da(n){return n.indexOf("my")===0}var ka=Ia,Ba=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var a=this.model,i=a.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":a.get("type",!0)||"png",u=r.getConnectedDataURL({type:s,backgroundColor:a.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),c=Un.browser;if(pt(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var l=document.createElement("a");l.download=i+"."+s,l.target="_blank",l.href=u;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(p)}else if(window.navigator.msSaveOrOpenBlob||o){var h=u.split(","),v=h[0].indexOf("base64")>-1,f=o?decodeURIComponent(h[1]):h[1];v&&(f=window.atob(f));var m=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var C=f.length,_=new Uint8Array(C);C--;)_[C]=f.charCodeAt(C);var y=new Blob([_]);window.navigator.msSaveOrOpenBlob(y,m)}else{var S=document.createElement("iframe");document.body.appendChild(S);var g=S.contentWindow,d=g.document;d.open("image/svg+xml","replace"),d.write(f),d.close(),g.focus(),d.execCommand("SaveAs",!0,m),document.body.removeChild(S)}}else{var b=a.get("lang"),T='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(b&&b[0]||"")+'" /></body>',M=window.open();M.document.write(T),M.document.title=i}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(k),Pa=Ba,Me="__ec_magicType_stack__",Ra=[["line","bar"],["stack"]],Ea=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),a={};return x(t.get("type"),function(i){r[i]&&(a[i]=r[i])}),a},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,a){var i=this.model,o=i.get(["seriesIndex",a]);if(!!we[a]){var s={series:[]},u=function(p){var h=p.subType,v=p.id,f=we[a](h,v,p,i);f&&(it(f,p.option),s.series.push(f));var m=p.coordinateSystem;if(m&&m.type==="cartesian2d"&&(a==="line"||a==="bar")){var C=m.getAxesByScale("ordinal")[0];if(C){var _=C.dim,y=_+"Axis",S=p.getReferringComponents(y,ht).models[0],g=S.componentIndex;s[y]=s[y]||[];for(var d=0;d<=g;d++)s[y][g]=s[y][g]||{};s[y][g].boundaryGap=a==="bar"}}};x(Ra,function(p){F(p,a)>=0&&x(p,function(h){i.setIconStatus(h,"normal")})}),i.setIconStatus(a,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var c,l=a;a==="stack"&&(c=E({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",a])!=="emphasis"&&(l="tiled")),r.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:c,featureName:"magicType"})}},e}(k),we={line:function(n,e,t,r){if(n==="bar")return E({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return E({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var a=t.get("stack")===Me;if(n==="line"||n==="bar")return r.setIconStatus("stack",a?"normal":"emphasis"),E({id:e,stack:a?"":Me},r.get(["option","stack"])||{},!0)}};vt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var La=Ea,mt=new Array(60).join("-"),J="	";function Va(n){var e={},t=[],r=[];return n.eachRawSeries(function(a){var i=a.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(a)}else t.push(a)}else t.push(a)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function Na(n){var e=[];return x(n,function(t,r){var a=t.categoryAxis,i=t.valueAxis,o=i.dim,s=[" "].concat(I(t.series,function(v){return v.name})),u=[a.model.getCategories()];x(t.series,function(v){var f=v.getRawData();u.push(v.getRawData().mapArray(f.mapDimension(o),function(m){return m}))});for(var c=[s.join(J)],l=0;l<u[0].length;l++){for(var p=[],h=0;h<u.length;h++)p.push(u[h][l]);c.push(p.join(J))}e.push(c.join(`
`))}),e.join(`

`+mt+`

`)}function za(n){return I(n,function(e){var t=e.getRawData(),r=[e.name],a=[];return t.each(t.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],s=t.getName(o),u=0;u<i-1;u++)a[u]=arguments[u];r.push((s?s+J:"")+a.join(J))}),r.join(`
`)}).join(`

`+mt+`

`)}function Za(n){var e=Va(n);return{value:Gn([Na(e.seriesGroupByCategoryAxis),za(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+mt+`

`),meta:e.meta}}function ft(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Wa(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(J)>=0)return!0}var Rt=new RegExp("["+J+"]+","g");function Ha(n){for(var e=n.split(/\n+/g),t=ft(e.shift()).split(Rt),r=[],a=I(t,function(u){return{name:u,data:[]}}),i=0;i<e.length;i++){var o=ft(e[i]).split(Rt);r.push(o.shift());for(var s=0;s<o.length;s++)a[s]&&(a[s].data[i]=o[s])}return{series:a,categories:r}}function Fa(n){for(var e=n.split(/\n+/g),t=ft(e.shift()),r=[],a=0;a<e.length;a++){var i=ft(e[a]);if(!!i){var o=i.split(Rt),s="",u=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[a]={name:s,value:[]},u=r[a].value):u=r[a]=[];for(var l=0;l<o.length;l++)u.push(+o[l]);u.length===1&&(c?r[a].value=u[0]:r[a]=u[0])}}return{name:t,data:r}}function Ua(n,e){var t=n.split(new RegExp(`
*`+mt+`
*`,"g")),r={series:[]};return x(t,function(a,i){if(Wa(a)){var o=Ha(a),s=e[i],u=s.axisDim+"Axis";s&&(r[u]=r[u]||[],r[u][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=Fa(a);r.series.push(o)}}),r}var $a=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var a=r.getDom(),i=this.model;this._dom&&a.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=i.get("lang")||[];s.innerHTML=u[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var c=document.createElement("div"),l=document.createElement("textarea");c.style.cssText="overflow:auto";var p=i.get("optionToContent"),h=i.get("contentToOption"),v=Za(t);if(pt(p)){var f=p(r.getOption());Ot(f)?c.innerHTML=f:$n(f)&&c.appendChild(f)}else{l.readOnly=i.get("readOnly");var m=l.style;m.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",m.color=i.get("textColor"),m.borderColor=i.get("textareaBorderColor"),m.backgroundColor=i.get("textareaColor"),l.value=v.value,c.appendChild(l)}var C=v.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),g=document.createElement("div");y+=";background-color:"+i.get("buttonColor"),y+=";color:"+i.get("buttonTextColor");var d=this;function b(){a.removeChild(o),d._dom=null}oe(S,"click",b),oe(g,"click",function(){if(h==null&&p!=null||h!=null&&p==null){b();return}var T;try{pt(h)?T=h(c,r.getOption()):T=Ua(l.value,C)}catch(M){throw b(),new Error("Data view format error "+M)}T&&r.dispatchAction({type:"changeDataView",newOption:T}),b()}),S.innerHTML=u[1],g.innerHTML=u[2],g.style.cssText=S.style.cssText=y,!i.get("readOnly")&&_.appendChild(g),_.appendChild(S),o.appendChild(s),o.appendChild(c),o.appendChild(_),c.style.height=a.clientHeight-80+"px",a.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(k);function Ga(n,e){return I(n,function(t,r){var a=e&&e[r];if(wt(a)&&!Z(a)){var i=wt(t)&&!Z(t);i||(t={value:t});var o=a.name!=null&&t.name==null;return t=it(t,a),o&&delete t.name,t}else return t})}vt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];x(n.newOption.series,function(r){var a=e.getSeriesByName(r.name)[0];if(!a)t.push(Zt({type:"scatter"},r));else{var i=a.get("data");t.push({name:r.name,data:Ga(r.data,i)})}}),e.mergeOption(it({series:t},n.newOption))});var Ya=$a,pn=x,fn=Yn();function Xa(n,e){var t=Kt(n);pn(e,function(r,a){for(var i=t.length-1;i>=0;i--){var o=t[i];if(o[a])break}if(i<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(s){var u=s.getPercentRange();t[0][a]={dataZoomId:a,start:u[0],end:u[1]}}}}),t.push(e)}function Ka(n){var e=Kt(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return pn(t,function(a,i){for(var o=e.length-1;o>=0;o--)if(a=e[o][i],a){r[i]=a;break}}),r}function Qa(n){fn(n).snapshots=null}function qa(n){return Kt(n).length}function Kt(n){var e=fn(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Ja=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){Qa(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(k);vt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var ja=Ja,ti=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],ei=function(){function n(e,t,r){var a=this;this._targetInfoList=[];var i=Oe(t,e);x(ni,function(o,s){(!r||!r.include||F(r.include,s)>=0)&&o(i,a._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,a,i){if((r.coordRanges||(r.coordRanges=[])).push(a),!r.coordRange){r.coordRange=a;var o=Tt[r.brushType](0,i,a);r.__rangeOffset={offset:Be[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){x(e,function(a){var i=this.findTargetInfo(a,t);i&&i!==!0&&x(i.coordSyses,function(o){var s=Tt[a.brushType](1,o,a.range,!0);r(a,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){x(e,function(r){var a=this.findTargetInfo(r,t);if(r.range=r.range||[],a&&a!==!0){r.panelId=a.panelId;var i=Tt[r.brushType](0,a.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Be[r.brushType](i.values,o.offset,ri(i.xyMinMax,o.xyMinMax)):i.values}},this)},n.prototype.makePanelOpts=function(e,t){return I(this._targetInfoList,function(r){var a=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:zr(a),isTargetByCursor:Wr(a,e,r.coordSysModel),getLinearBrushOtherExtent:Zr(a)}})},n.prototype.controlSeries=function(e,t,r){var a=this.findTargetInfo(e,r);return a===!0||a&&F(a.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,a=Oe(t,e),i=0;i<r.length;i++){var o=r[i],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<Ie.length;u++)if(Ie[u](a,o))return o}return!0},n}();function Et(n){return n[0]>n[1]&&n.reverse(),n}function Oe(n,e){return Ge(n,e,{includeMainTypes:ti})}var ni={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,a=n.gridModels,i=rt(),o={},s={};!t&&!r&&!a||(x(t,function(u){var c=u.axis.grid.model;i.set(c.id,c),o[c.id]=!0}),x(r,function(u){var c=u.axis.grid.model;i.set(c.id,c),s[c.id]=!0}),x(a,function(u){i.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),i.each(function(u){var c=u.coordinateSystem,l=[];x(c.getCartesians(),function(p,h){(F(t,p.getAxis("x").model)>=0||F(r,p.getAxis("y").model)>=0)&&l.push(p)}),e.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:l[0],coordSyses:l,getPanelRect:De.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(n,e){x(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:De.geo})})}},Ie=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,a=n.gridModel;return!a&&t&&(a=t.axis.grid.model),!a&&r&&(a=r.axis.grid.model),a&&a===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],De={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(He(n)),e}},Tt={lineX:B(ke,0),lineY:B(ke,1),rect:function(n,e,t,r){var a=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),i=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[Et([a[0],i[0]]),Et([a[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var a=[[1/0,-1/0],[1/0,-1/0]],i=I(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return a[0][0]=Math.min(a[0][0],s[0]),a[1][0]=Math.min(a[1][0],s[1]),a[0][1]=Math.max(a[0][1],s[0]),a[1][1]=Math.max(a[1][1],s[1]),s});return{values:i,xyMinMax:a}}};function ke(n,e,t,r){var a=t.getAxis(["x","y"][n]),i=Et(I([0,1],function(s){return e?a.coordToData(a.toLocalCoord(r[s]),!0):a.toGlobalCoord(a.dataToCoord(r[s]))})),o=[];return o[n]=i,o[1-n]=[NaN,NaN],{values:i,xyMinMax:o}}var Be={lineX:B(Pe,0),lineY:B(Pe,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return I(n,function(r,a){return[r[0]-t[0]*e[a][0],r[1]-t[1]*e[a][1]]})}};function Pe(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function ri(n,e){var t=Re(n),r=Re(e),a=[t[0]/r[0],t[1]/r[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}function Re(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var Qt=ei,Lt=x,ai=Kn("toolbox-dataZoom_"),ii=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,a,i){this._brushController||(this._brushController=new un(a.getZr()),this._brushController.on("brush",dt(this._onBrush,this)).mount()),ui(t,r,this,i,a),si(t,r)},e.prototype.onclick=function(t,r,a){oi[a].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var a={},i=this.ecModel;this._brushController.updateCovers([]);var o=new Qt(qt(this.model),i,{include:["grid"]});o.matchOutputRanges(r,i,function(c,l,p){if(p.type==="cartesian2d"){var h=c.brushType;h==="rect"?(s("x",p,l[0]),s("y",p,l[1])):s({lineX:"x",lineY:"y"}[h],p,l)}}),Xa(i,a),this._dispatchZoomAction(a);function s(c,l,p){var h=l.getAxis(c),v=h.model,f=u(c,v,i),m=f.findRepresentativeAxisProxy(v).getMinMaxSpan();(m.minValueSpan!=null||m.maxValueSpan!=null)&&(p=Xe(0,p.slice(),h.scale.getExtent(),0,m.minValueSpan,m.maxValueSpan)),f&&(a[f.id]={dataZoomId:f.id,startValue:p[0],endValue:p[1]})}function u(c,l,p){var h;return p.eachComponent({mainType:"dataZoom",subType:"select"},function(v){var f=v.getAxisModel(c,l.componentIndex);f&&(h=v)}),h}},e.prototype._dispatchZoomAction=function(t){var r=[];Lt(t,function(a,i){r.push(R(a))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(k),oi={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(Ka(this.ecModel))}};function qt(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function si(n,e){n.setIconStatus("back",qa(e)>1?"emphasis":"normal")}function ui(n,e,t,r,a){var i=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(i=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=i,n.setIconStatus("zoom",i?"emphasis":"normal");var o=new Qt(qt(n),e,{include:["grid"]}),s=o.makePanelOpts(a,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Xn("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),a=[],i=qt(r),o=Ge(n,i);Lt(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),Lt(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,c,l){var p=u.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:ai+c+p};h[l]=p,a.push(h)}return a});var li=ii;function ci(n){n.registerComponentModel(Oa),n.registerComponentView(ka),K("saveAsImage",Pa),K("magicType",La),K("dataView",Ya),K("dataZoom",li),K("restore",ja),Ye(Ma)}var hi=["rect","polygon","keep","clear"];function pi(n,e){var t=Qn(n?n.brush:[]);if(!!t.length){var r=[];x(t,function(u){var c=u.hasOwnProperty("toolbox")?u.toolbox:[];c instanceof Array&&(r=r.concat(c))});var a=n&&n.toolbox;Z(a)&&(a=a[0]),a||(a={feature:{}},n.toolbox=[a]);var i=a.feature||(a.feature={}),o=i.brush||(i.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),fi(s),e&&!s.length&&s.push.apply(s,hi)}}function fi(n){var e={};x(n,function(t){e[t]=1}),n.length=0,x(e,function(t,r){n.push(r)})}function vi(n){var e=n.brushType,t={point:function(r){return Ee[e].point(r,t,n)},rect:function(r){return Ee[e].rect(r,t,n)}};return t}var Ee={lineX:Le(0),lineY:Le(1),rect:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])},rect:function(n,e,t){return n&&t.boundingRect.intersect(n)}},polygon:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])&&et(t.range,n[0],n[1])},rect:function(n,e,t){var r=t.range;if(!n||r.length<=1)return!1;var a=n.x,i=n.y,o=n.width,s=n.height,u=r[0];if(et(r,a,i)||et(r,a+o,i)||et(r,a,i+s)||et(r,a+o,i+s)||zt.create(n).contain(u[0],u[1])||ut(a,i,a+o,i,r)||ut(a,i,a,i+s,r)||ut(a+o,i,a+o,i+s,r)||ut(a,i+s,a+o,i+s,r))return!0}}};function Le(n){var e=["x","y"],t=["width","height"];return{point:function(r,a,i){if(r){var o=i.range,s=r[n];return nt(s,o)}},rect:function(r,a,i){if(r){var o=i.range,s=[r[e[n]],r[e[n]]+r[t[n]]];return s[1]<s[0]&&s.reverse(),nt(s[0],o)||nt(s[1],o)||nt(o[0],s)||nt(o[1],s)}}}}function nt(n,e){return e[0]<=n&&n<=e[1]}var Ve=["inBrush","outOfBrush"],At="__ecBrushSelect",Vt="__ecInBrushSelectEvent";function vn(n){n.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new Qt(e.option,n);t.setInputRanges(e.areas,n)})}function di(n,e,t){var r=[],a,i;n.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),vn(n),n.eachComponent({mainType:"brush"},function(o,s){var u={brushId:o.id,brushIndex:s,brushName:o.name,areas:R(o.areas),selected:[]};r.push(u);var c=o.option,l=c.brushLink,p=[],h=[],v=[],f=!1;s||(a=c.throttleType,i=c.throttleDelay);var m=I(o.areas,function(d){var b=xi[d.brushType],T=it({boundingRect:b?b(d):void 0},d);return T.selectors=vi(T),T}),C=or(o.option,Ve,function(d){d.mappingMethod="fixed"});Z(l)&&x(l,function(d){p[d]=1});function _(d){return l==="all"||!!p[d]}function y(d){return!!d.length}n.eachSeries(function(d,b){var T=v[b]=[];d.subType==="parallel"?S(d,b):g(d,b,T)});function S(d,b){var T=d.coordinateSystem;f=f||T.hasAxisBrushed(),_(b)&&T.eachActiveState(d.getData(),function(M,A){M==="active"&&(h[A]=1)})}function g(d,b,T){if(!(!d.brushSelector||yi(o,b))&&(x(m,function(A){o.brushTargetManager.controlSeries(A,d,n)&&T.push(A),f=f||y(T)}),_(b)&&y(T))){var M=d.getData();M.each(function(A){Ne(d,T,M,A)&&(h[A]=1)})}}n.eachSeries(function(d,b){var T={seriesId:d.id,seriesIndex:b,seriesName:d.name,dataIndex:[]};u.selected.push(T);var M=v[b],A=d.getData(),w=_(b)?function(D){return h[D]?(T.dataIndex.push(A.getRawIndex(D)),"inBrush"):"outOfBrush"}:function(D){return Ne(d,M,A,D)?(T.dataIndex.push(A.getRawIndex(D)),"inBrush"):"outOfBrush"};(_(b)?f:y(M))&&sr(Ve,C,A,w)})}),gi(e,a,i,r,t)}function gi(n,e,t,r,a){if(!!a){var i=n.getZr();if(!i[Vt]){i[At]||(i[At]=mi);var o=qn(i,At,t,e);o(n,r)}}}function mi(n,e){if(!n.isDisposed()){var t=n.getZr();t[Vt]=!0,n.dispatchAction({type:"brushSelect",batch:e}),t[Vt]=!1}}function Ne(n,e,t,r){for(var a=0,i=e.length;a<i;a++){var o=e[a];if(n.brushSelector(r,t,o.selectors,o))return!0}}function yi(n,e){var t=n.option.seriesIndex;return t!=null&&t!=="all"&&(Z(t)?F(t,e)<0:e!==t)}var xi={rect:function(n){return ze(n.range)},polygon:function(n){for(var e,t=n.range,r=0,a=t.length;r<a;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=t[r];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&ze(e)}};function ze(n){return new zt(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var bi=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new un(r.getZr())).on("brush",dt(this._onBrush,this)).mount()},e.prototype.render=function(t,r,a,i){this.model=t,this._updateController(t,r,a,i)},e.prototype.updateTransform=function(t,r,a,i){vn(r),this._updateController(t,r,a,i)},e.prototype.updateVisual=function(t,r,a,i){this.updateTransform(t,r,a,i)},e.prototype.updateView=function(t,r,a,i){this._updateController(t,r,a,i)},e.prototype._updateController=function(t,r,a,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(a)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,a=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:R(a),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:R(a),$from:r})},e.type="brush",e}(Ht),_i=bi,Si="#ddd",Ci=function(n){O(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var a=this.option;!r&&ur(a,t,["inBrush","outOfBrush"]);var i=a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:Si},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){!t||(this.areas=I(t,function(r){return Ze(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=Ze(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Wt);function Ze(n,e){return E({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new $e(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},e,!0)}var Ti=Ci,Ai=["rect","polygon","lineX","lineY","keep","clear"],Mi=function(n){O(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,a){var i,o,s;r.eachComponent({mainType:"brush"},function(u){i=u.brushType,o=u.brushOption.brushMode||"single",s=s||!!u.areas.length}),this._brushType=i,this._brushMode=o,x(t.get("type",!0),function(u){t.setIconStatus(u,(u==="keep"?o==="multiple":u==="clear"?s:u===i)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,a){this.render(t,r,a)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),a={};return x(t.get("type",!0),function(i){r[i]&&(a[i]=r[i])}),a},e.prototype.onclick=function(t,r,a){var i=this._brushType,o=this._brushMode;a==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:a==="keep"?i:i===a?!1:a,brushMode:a==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:Ai.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(k),wi=Mi;function Oi(n){n.registerComponentView(_i),n.registerComponentModel(Ti),n.registerPreprocessor(pi),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,di),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Mt),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Mt),K("brush",wi)}Ye([jn,tr,gr,sa,er,nr,rr,ar,lr,cr,mr,Oi,ci]);var Ii=hr({name:"StockView",components:{VChart:Jn},mounted:function(){},methods:{getServerMarketData:async function(){let n={};const e=await gn.get("http://s.anno189.com/days/000001/2021-12-31",n);this.StockOption=e.data}},setup(){const n=se({}),e=se("");return{StockOption:n,onSearch:r=>{console.log("use value",r),console.log("or use this.value",e.value)},value:e}}});const Di={class:"flex flex-col w-full md:flex-row"},ki={class:"flex basis-1/6 p-2"},Bi={class:"flex"},Pi={class:"flex basis-5/6 p-2"};function Ri(n,e){const t=ct("a-input-search"),r=ct("a-menu-item"),a=ct("a-menu"),i=ct("v-chart");return fr(),vr(dr,null,[tt(t,{value:n.value,"onUpdate:value":e[0]||(e[0]=o=>n.value=o),placeholder:"input search text",text:"2021-11-22","enter-button":"",onSearch:n.onSearch},null,8,["value","onSearch"]),lt("div",Di,[lt("div",ki,[lt("div",Bi,[tt(a,{openKeys:n.openKeys,"onUpdate:openKeys":e[1]||(e[1]=o=>n.openKeys=o),selectedKeys:n.selectedKeys,"onUpdate:selectedKeys":e[2]||(e[2]=o=>n.selectedKeys=o),style:{width:"256px"},mode:"vertical",onClick:n.handleClick},{default:bt(()=>[tt(r,{key:"000002"},{default:bt(()=>[ue("000002 ")]),_:1}),tt(r,{key:"000001"},{default:bt(()=>[ue("000001 ")]),_:1})]),_:1},8,["openKeys","selectedKeys","onClick"])])]),lt("div",Pi,[tt(i,{class:"chart",option:n.StockOption,autoresize:"",ref:"StockChart"},null,8,["option"])])])],64)}var Ui=pr(Ii,[["render",Ri],["__scopeId","data-v-0ad0988d"]]);export{Ui as default};
