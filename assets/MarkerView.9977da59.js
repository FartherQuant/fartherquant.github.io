import{i as b,_ as M,bk as _,e as N,g as O,q as k,z as w,y as B,bl as E,bm as C,a$ as S,af as f,h as G,b1 as x,bn as A,bo as I,bp as $,bq as z,br as q,bs as H,H as R}from"./index.esm.min.3d9c5cea.js";function P(r,e){if(!r)return!1;for(var a=b(r)?r:[r],n=0;n<a.length;n++)if(a[n]&&a[n][e])return!0;return!1}function v(r){C(r,"label",["show"])}var m=S(),T=function(r){M(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,n,t){this.mergeDefaultAndTheme(a,t),this._mergeOption(a,t,!1,!0)},e.prototype.isAnimationEnabled=function(){if(_.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,n){this._mergeOption(a,n,!1,!1)},e.prototype._mergeOption=function(a,n,t,i){var s=this.mainType;t||n.eachSeries(function(o){var u=o.get(this.mainType,!0),p=m(o)[s];if(!u||!u.data){m(o)[s]=null;return}p?p._mergeOption(u,n,!0):(i&&v(u),N(u.data,function(l){l instanceof Array?(v(l[0]),v(l[1])):v(l)}),p=this.createMarkerModelFromSeries(u,this,n),O(p,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),p.__hostSeries=o),m(o)[s]=p},this)},e.prototype.formatTooltip=function(a,n,t){var i=this.getData(),s=this.getRawValue(a),o=i.getName(a);return k("section",{header:this.name,blocks:[k("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.getMarkerModelFromSeries=function(a,n){return m(a)[n]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(w);B(T,E.prototype);var D=T;function d(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function X(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function h(r,e,a,n,t,i){var s=[],o=I(e,n),u=o?e.getCalculationInfo("stackResultDimension"):n,p=F(e,u,r),l=e.indicesOfNearest(u,p)[0];s[t]=e.get(a,l),s[i]=e.get(u,l);var V=e.get(n,l),c=$(e.get(n,l));return c=Math.min(c,20),c>=0&&(s[i]=+s[i].toFixed(c)),[s,V]}var g={min:f(h,"min"),max:f(h,"max"),average:f(h,"average"),median:f(h,"median")};function W(r,e){var a=r.getData(),n=r.coordinateSystem;if(e&&!X(e)&&!b(e.coord)&&n){var t=n.dimensions,i=Y(e,a,n,r);if(e=G(e),e.type&&g[e.type]&&i.baseAxis&&i.valueAxis){var s=x(t,i.baseAxis.dim),o=x(t,i.valueAxis.dim),u=g[e.type](a,i.baseDataDim,i.valueDataDim,s,o);e.coord=u[0],e.value=u[1]}else{for(var p=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis],l=0;l<2;l++)g[p[l]]&&(p[l]=F(a,a.mapDimension(t[l]),p[l]));e.coord=p}}return e}function Y(r,e,a,n){var t={};return r.valueIndex!=null||r.valueDim!=null?(t.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,t.valueAxis=a.getAxis(Z(n,t.valueDataDim)),t.baseAxis=a.getOtherAxis(t.valueAxis),t.baseDataDim=e.mapDimension(t.baseAxis.dim)):(t.baseAxis=n.getBaseAxis(),t.valueAxis=a.getOtherAxis(t.baseAxis),t.baseDataDim=e.mapDimension(t.baseAxis.dim),t.valueDataDim=e.mapDimension(t.valueAxis.dim)),t}function Z(r,e){var a=r.getData().getDimensionInfo(e);return a&&a.coordDim}function j(r,e){return r&&r.containData&&e.coord&&!d(e)?r.containData(e.coord):!0}function J(r,e,a){return r&&r.containZone&&e.coord&&a.coord&&!d(e)&&!d(a)?r.containZone(e.coord,a.coord):!0}function Q(r,e){return r?function(a,n,t,i){var s=i<2?a.coord&&a.coord[i]:a.value;return A(s,e[i])}:function(a,n,t,i){return A(a.value,e[i])}}function F(r,e,a){if(a==="average"){var n=0,t=0;return r.each(e,function(i,s){isNaN(i)||(n+=i,t++)}),n/t}else return a==="median"?r.getMedian(e):r.getDataExtent(e)[a==="max"?1:0]}var y=S(),K=function(r){M(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=z()},e.prototype.render=function(a,n,t){var i=this,s=this.markerGroupMap;s.each(function(o){y(o).keep=!1}),n.eachSeries(function(o){var u=D.getMarkerModelFromSeries(o,i.type);u&&i.renderSeries(o,u,n,t)}),s.each(function(o){!y(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(a){y(a).keep=!0},e.prototype.toggleBlurSeries=function(a,n){var t=this;N(a,function(i){var s=D.getMarkerModelFromSeries(i,t.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(u){u&&(n?q(u):H(u))})}})},e.type="marker",e}(R),U=K;export{D as M,U as a,j as b,Q as c,W as d,P as e,Y as g,F as n,J as z};
